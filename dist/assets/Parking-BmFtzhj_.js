import{b as o,j as e,M as ae,ad as Ae,Q as Be,O as _e,V as W,p as H,m as x,n as ne,a6 as L,X as N,C as J,I as Ee,aa as oe,ag as Le,J as se,k as $e,H as de,ah as le,R as P}from"./vendor-DzNx7Wzk.js";import{b as Oe,i as u}from"./index-Cv4Rgu7H.js";import{u as U,w as Me}from"./excel-DPAq_XXe.js";import{S as Fe}from"./SEO-CQTVrbvL.js";const He=({onCapture:s,onClose:f})=>{const k=P.useRef(null),D=P.useRef(null),y=P.useRef(null),[R,S]=P.useState(null);P.useEffect(()=>($(),()=>d()),[]);const $=async()=>{try{const g={video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}},c=await navigator.mediaDevices.getUserMedia(g);y.current=c,k.current&&(k.current.srcObject=c)}catch(g){console.error("Camera error:",g),S("Could not access camera. Please ensure permissions are granted.")}},d=()=>{y.current&&(y.current.getTracks().forEach(g=>g.stop()),y.current=null)},O=()=>{const g=k.current,c=D.current;g&&c&&(c.width=g.videoWidth,c.height=g.videoHeight,c.getContext("2d").drawImage(g,0,0,c.width,c.height),c.toBlob(M=>{const n=new File([M],"parking.jpg",{type:"image/jpeg"});s(n,c.toDataURL("image/jpeg")),d(),f()},"image/jpeg",.8))};return e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",zIndex:1100,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs("div",{className:"glass-card",style:{width:"100%",maxWidth:"500px",padding:"20px",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsx("h3",{style:{color:"white",margin:0},children:"Capture Parking Photo"}),e.jsx("button",{onClick:f,style:{background:"none",border:"none",color:"white",cursor:"pointer"},children:e.jsx(N,{size:24})})]}),R?e.jsx("div",{style:{color:"#f43f5e",padding:"20px",textAlign:"center"},children:R}):e.jsx("video",{ref:k,autoPlay:!0,playsInline:!0,style:{width:"100%",borderRadius:"12px",background:"black"}}),e.jsx("canvas",{ref:D,style:{display:"none"}}),!R&&e.jsxs("button",{onClick:O,style:{width:"100%",marginTop:"20px",padding:"15px",borderRadius:"12px",background:"var(--primary)",color:"white",border:"none",fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(de,{size:20})," CAPTURE PHOTO"]})]})})},Ye=()=>{const{selectedCompany:s}=Oe(),f=r=>r?r.startsWith("http")?r:`${"".replace(/\/+$/,"")}/${r.replace(/^\/+/,"")}`:"",[k,D]=o.useState([]),[y,R]=o.useState([]),[S,$]=o.useState([]),[d,O]=o.useState([]),[g,c]=o.useState(!1),[m,M]=o.useState([]),[n,pe]=o.useState("parking"),[ce,V]=o.useState(!0),[xe,T]=o.useState(!1),[A,q]=o.useState(null),[ge,he]=o.useState([]),[F,ue]=o.useState(""),[B,be]=o.useState("All"),[b,Y]=o.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[p,j]=o.useState({vehicleId:"",driverId:"",driver:"",amount:"",date:new Date().toISOString().split("T")[0],receiptPhoto:""}),[G,X]=o.useState(!1),[fe,v]=o.useState(!1),[Q,I]=o.useState(""),[ye,K]=o.useState(!1),[me,je]=o.useState(0),[ve,Se]=o.useState(0);o.useEffect(()=>{s&&(_(),Z(),ee(),ke(),Ie(),we())},[s,b]),o.useEffect(()=>{n==="carservices"?je(S.filter(r=>r.type==="other").length):n==="parking"&&Se(S.filter(r=>r.type==="parking").length)},[n,S]);const Z=async()=>{if(s?._id)try{const r=localStorage.getItem("userInfo"),t=r?JSON.parse(r):null;if(!t?.token)return;const{data:i}=await u.get(`/api/admin/parking/pending/${s._id}`,{headers:{Authorization:`Bearer ${t.token}`}});$(i||[])}catch(r){console.error(r)}},ee=async()=>{if(s?._id)try{const r=localStorage.getItem("userInfo"),t=r?JSON.parse(r):null;if(!t?.token)return;const{data:i}=await u.get(`/api/admin/parking/pending/${s._id}?status=rejected`,{headers:{Authorization:`Bearer ${t.token}`}});O(i||[])}catch(r){console.error(r)}},we=async()=>{if(s?._id)try{const r=localStorage.getItem("userInfo"),t=r?JSON.parse(r):null;if(!t?.token)return;const{data:i}=await u.get(`/api/admin/car-services/${s._id}?from=${b.from}&to=${b.to}`,{headers:{Authorization:`Bearer ${t.token}`}});M(i||[])}catch(r){console.error("Car services fetch error:",r)}},_=async()=>{if(s?._id){V(!0);try{const r=localStorage.getItem("userInfo"),t=r?JSON.parse(r):null;if(!t?.token)return;const{data:i}=await u.get(`/api/admin/parking/${s._id}?from=${b.from}&to=${b.to}`,{headers:{Authorization:`Bearer ${t.token}`}});D(i||[])}catch(r){console.error(r)}finally{V(!1)}}},ke=async()=>{if(s?._id)try{const r=localStorage.getItem("userInfo"),t=r?JSON.parse(r):null;if(!t?.token)return;const{data:i}=await u.get(`/api/admin/drivers/${s._id}?usePagination=false&isFreelancer=false`,{headers:{Authorization:`Bearer ${t.token}`}});R(i.drivers||[])}catch(r){console.error(r)}},Ie=async()=>{if(s?._id)try{const r=localStorage.getItem("userInfo"),t=r?JSON.parse(r):null;if(!t?.token)return;const{data:i}=await u.get(`/api/admin/vehicles/${s._id}`,{headers:{Authorization:`Bearer ${t.token}`}});he(i.vehicles||[])}catch(r){console.error(r)}},ze=async r=>{r.preventDefault(),X(!0);try{const t=localStorage.getItem("userInfo"),i=t?JSON.parse(t):null;if(!i?.token)return;A?(await u.put(`/api/admin/parking/${A}`,{...p,companyId:s._id},{headers:{Authorization:`Bearer ${i.token}`}}),alert("Parking entry updated successfully")):(await u.post("/api/admin/parking",{...p,companyId:s._id},{headers:{Authorization:`Bearer ${i.token}`}}),alert("Parking entry added successfully")),T(!1),ie(),_()}catch(t){console.error(t),alert(t.response?.data?.message||"Error saving entry")}finally{X(!1)}},re=async r=>{if(window.confirm("Are you sure you want to delete this entry?"))try{const t=localStorage.getItem("userInfo"),i=t?JSON.parse(t):null;if(!i?.token)return;await u.delete(`/api/admin/parking/${r}`,{headers:{Authorization:`Bearer ${i.token}`}}),_()}catch(t){console.error(t)}},E=async(r,t,i)=>{try{const a=localStorage.getItem("userInfo"),h=a?JSON.parse(a):null;if(!h?.token)return;await u.patch(`/api/admin/attendance/${r}/expense/${t}`,{status:i},{headers:{Authorization:`Bearer ${h.token}`}}),Z(),ee(),_()}catch(a){console.error(a),alert("Error processing request")}},Ce=r=>{q(r._id),j({vehicleId:r.vehicle?._id||"",driverId:r.driverId?._id||"",driver:r.driver||"",amount:r.amount||"",date:new Date(r.date).toISOString().split("T")[0],receiptPhoto:r.receiptPhoto||""}),T(!0)},te=async r=>{const t=r.type==="change"?r.target.files[0]:r;if(!t)return;const i=new FormData;i.append("file",t),i.append("upload_preset","yatreedestination");try{const a=localStorage.getItem("userInfo"),h=a?JSON.parse(a):null,l=await u.post("/api/admin/upload",i,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${h?.token}`}});j({...p,receiptPhoto:l.data.url})}catch(a){console.error("Upload failed:",a),alert("Image upload failed. Please try again.")}},ie=()=>{q(null),j({vehicleId:"",driverId:"",driver:"",amount:"",date:new Date().toISOString().split("T")[0],receiptPhoto:""})},Re=()=>{const r=w.map(a=>({Date:new Date(a.date).toLocaleDateString("en-IN"),Vehicle:a.vehicle?.carNumber||"N/A",Driver:a.driver||"N/A","Amount (â‚¹)":a.amount,Source:a.source||"Admin"})),t=U.json_to_sheet(r),i=U.book_new();U.book_append_sheet(i,t,"Parking Logs"),Me(i,`Parking_Report_${s?.name}_${new Date().toISOString().split("T")[0]}.xlsx`)},w=k.filter(r=>{const t=r.vehicle?.carNumber||"",i=r.driver||"",a=t.toLowerCase().includes(F.toLowerCase())||i.toLowerCase().includes(F.toLowerCase());if(r.driverId?.isFreelancer||r.driver?.includes("(F)"))return!1;const l=B==="All"||r.driverId?._id===B||r.driver===B;return a&&l}),Te=w.reduce((r,t)=>r+(Number(t.amount)||0),0),We=w.filter(r=>r.source==="Driver").reduce((r,t)=>r+(Number(t.amount)||0),0),Pe=w.filter(r=>r.source==="Admin").reduce((r,t)=>r+(Number(t.amount)||0),0),z=S.filter(r=>r.type==="parking"),C=S.filter(r=>r.type==="other"),Ne=Math.max(0,z.length-(n==="parking"?z.length:ve)),De=Math.max(0,C.length-(n==="carservices"?C.length:me));return e.jsxs("div",{className:"container-fluid",style:{paddingBottom:"40px"},children:[e.jsx(Fe,{title:"Parking Management",description:"Track parking expenses, driver payments, and office costs."}),e.jsxs("header",{style:{padding:"clamp(20px, 4vw, 40px) 0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"clamp(40px,10vw,50px)",height:"clamp(40px,10vw,50px)",background:"linear-gradient(135deg, white, #f8fafc)",borderRadius:"16px",padding:"8px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:e.jsx(ae,{size:28,color:"#fbbf24"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#fbbf24",boxShadow:"0 0 8px #fbbf24"}}),e.jsx("span",{style:{fontSize:"clamp(9px,2.5vw,10px)",fontWeight:"800",color:"rgba(255,255,255,0.5)",letterSpacing:"1px",textTransform:"uppercase"},children:"Logistics Hub"})]}),e.jsxs("h1",{style:{color:"white",fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"900",margin:0,letterSpacing:"-1px",cursor:"pointer"},children:["Parking ",e.jsx("span",{className:"text-gradient-yellow",children:"Manager"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",width:"auto",justifyContent:"flex-start"},children:[e.jsxs("button",{onClick:Re,style:{display:"flex",alignItems:"center",gap:"8px",height:"48px",padding:"0 20px",borderRadius:"12px",fontWeight:"700",background:"rgba(255,255,255,0.03)",color:"white",border:"1px solid rgba(255,255,255,0.1)",transition:"all 0.3s ease",cursor:"pointer",flex:"1 1 auto"},onMouseOver:r=>r.currentTarget.style.background="rgba(255,255,255,0.08)",onMouseOut:r=>r.currentTarget.style.background="rgba(255,255,255,0.03)",children:[e.jsx(Ae,{size:18})," ",e.jsx("span",{className:"hide-mobile",children:"Export Report"}),e.jsx("span",{className:"show-mobile",children:"Export"})]}),e.jsxs("button",{onClick:()=>{ie(),T(!0)},style:{display:"flex",alignItems:"center",gap:"10px",height:"48px",padding:"0 24px",borderRadius:"12px",fontWeight:"800",background:"linear-gradient(135deg, #fbbf24 0%, #d97706 100%)",color:"black",border:"none",boxShadow:"0 8px 20px -6px rgba(251, 191, 36, 0.5)",transition:"all 0.3s ease",cursor:"pointer",flex:"1 1 180px",justifyContent:"center",whiteSpace:"nowrap"},onMouseOver:r=>r.currentTarget.style.transform="translateY(-2px)",onMouseOut:r=>r.currentTarget.style.transform="translateY(0)",children:[e.jsx(Be,{size:20})," ",e.jsx("span",{children:"New Entry"})]})]})]}),e.jsx("div",{className:"glass-card",style:{padding:"12px",borderRadius:"16px",background:"rgba(15, 23, 42, 0.4)",border:"1px solid rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",gap:"12px"},children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",width:"100%"},children:[e.jsxs("div",{style:{position:"relative",flex:"1 1 300px"},children:[e.jsx(_e,{size:18,style:{position:"absolute",left:"15px",top:"15px",color:"rgba(255,255,255,0.3)"}}),e.jsx("input",{type:"text",placeholder:"Search vehicle, driver or location...",value:F,onChange:r=>ue(r.target.value),style:{height:"48px",width:"100%",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",padding:"0 15px 0 45px",color:"white",fontSize:"14px",outline:"none",transition:"all 0.3s ease"}})]}),e.jsxs("div",{className:"glass-card",style:{padding:"0 15px",display:"flex",alignItems:"center",height:"48px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.08)",flex:"1 1 200px",background:"rgba(0,0,0,0.2)"},children:[e.jsx(W,{size:18,style:{marginRight:"10px",color:"var(--primary)"}}),e.jsxs("select",{value:B,onChange:r=>be(r.target.value),style:{background:"transparent",border:"none",color:"white",outline:"none",fontSize:"14px",fontWeight:"700",cursor:"pointer",width:"100%"},children:[e.jsx("option",{value:"All",style:{background:"#1e293b"},children:"All Drivers"}),y.map(r=>e.jsx("option",{value:r._id,style:{background:"#1e293b"},children:r.name},r._id))]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",flex:"1 1 300px",minWidth:"0"},className:"mobile-stack",children:[e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"120px"},children:[e.jsx(H,{size:14,style:{position:"absolute",left:"12px",top:"17px",color:"rgba(255,255,255,0.3)"}}),e.jsx("input",{type:"date",className:"input-field",style:{height:"48px",padding:"0 12px 0 35px",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",width:"100%",borderRadius:"12px",fontSize:"13px",colorScheme:"dark"},value:b.from,onChange:r=>Y({...b,from:r.target.value})})]}),e.jsxs("div",{style:{position:"relative",flex:1,minWidth:"120px"},children:[e.jsx(H,{size:14,style:{position:"absolute",left:"12px",top:"17px",color:"rgba(255,255,255,0.3)"}}),e.jsx("input",{type:"date",className:"input-field",style:{height:"48px",padding:"0 12px 0 35px",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",width:"100%",borderRadius:"12px",fontSize:"13px",colorScheme:"dark"},value:b.to,onChange:r=>Y({...b,to:r.target.value})})]})]})]})})]}),e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"32px",background:"rgba(255,255,255,0.03)",padding:"6px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.06)",width:"fit-content"},children:[{key:"parking",label:"ðŸ…¿ï¸ Parking Logs",count:z.length,badge:Ne>0,activeColor:"linear-gradient(135deg, #6366f1, #4f46e5)",activeShadow:"0 4px 16px rgba(99,102,241,0.35)"},{key:"carservices",label:"ðŸš— Car Services",count:C.length,badge:De>0,activeColor:"linear-gradient(135deg, #f59e0b, #d97706)",activeShadow:"0 4px 16px rgba(245,158,11,0.35)"},{key:"rejected",label:"ðŸš« Rejected",count:d.length,badge:d.length>0,activeColor:"linear-gradient(135deg, #f43f5e, #e11d48)",activeShadow:"0 4px 16px rgba(244,63,94,0.35)"}].map(r=>e.jsxs("button",{onClick:()=>pe(r.key),style:{padding:"10px 22px",borderRadius:"12px",fontWeight:"800",fontSize:"13px",border:"none",cursor:"pointer",transition:"all 0.25s ease",background:n===r.key?r.activeColor:"transparent",color:n===r.key?"white":"rgba(255,255,255,0.45)",boxShadow:n===r.key?r.activeShadow:"none",position:"relative"},children:[r.label,r.badge&&e.jsx("span",{style:{position:"absolute",top:"-6px",right:"-6px",background:(r.key==="rejected","#f43f5e"),color:"white",borderRadius:"50%",width:"18px",height:"18px",fontSize:"10px",fontWeight:"900",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(244, 63, 94, 0.4)"},children:r.count})]},r.key))}),n==="carservices"&&e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.35},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"32px"},children:[{label:"Total Spent",value:`â‚¹${m.reduce((r,t)=>r+(Number(t.amount)||0),0).toLocaleString()}`,icon:"ðŸ’°",color:"#f59e0b",bg:"rgba(245,158,11,0.08)",border:"rgba(245,158,11,0.2)"},{label:"Total Services",value:m.length,icon:"ðŸ”§",color:"#818cf8",bg:"rgba(129,140,248,0.08)",border:"rgba(129,140,248,0.2)"},{label:"Car Wash",value:m.filter(r=>(r.notes||"").toLowerCase().includes("car wash")).length,icon:"ðŸ›",color:"#22d3ee",bg:"rgba(34,211,238,0.08)",border:"rgba(34,211,238,0.2)"},{label:"Puncture",value:m.filter(r=>(r.notes||"").toLowerCase().includes("puncture")).length,icon:"ðŸ”©",color:"#10b981",bg:"rgba(16,185,129,0.08)",border:"rgba(16,185,129,0.2)"}].map((r,t)=>e.jsxs(x.div,{whileHover:{y:-4},className:"glass-card",style:{padding:"20px 24px",background:r.bg,border:`1px solid ${r.border}`,borderRadius:"18px",display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("span",{style:{fontSize:"28px"},children:r.icon}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",margin:"0 0 4px",letterSpacing:"1px"},children:r.label}),e.jsx("h2",{style:{color:r.color,fontSize:"26px",fontWeight:"900",margin:0},children:r.value})]})]},t))}),e.jsxs("div",{className:"glass-card",style:{padding:"0",borderRadius:"20px",overflow:"hidden",border:"1px solid rgba(245,158,11,0.15)"},children:[e.jsxs("div",{style:{padding:"20px 24px",background:"linear-gradient(135deg, rgba(245,158,11,0.12), rgba(217,119,6,0.06))",borderBottom:"1px solid rgba(245,158,11,0.12)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{color:"#fbbf24",fontSize:"16px",fontWeight:"900",margin:0},children:"Car Services Log"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"12px",margin:"4px 0 0"},children:"Approved Car Wash & Puncture entries from drivers"})]}),e.jsxs("span",{style:{background:"rgba(245,158,11,0.15)",color:"#f59e0b",padding:"4px 14px",borderRadius:"20px",fontSize:"12px",fontWeight:"800",border:"1px solid rgba(245,158,11,0.25)"},children:[m.length," Records"]})]}),m.length===0?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center"},children:[e.jsx("span",{style:{fontSize:"48px"},children:"ðŸš—"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.3)",fontWeight:"700",marginTop:"16px"},children:"No car service records in this date range"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.2)",fontSize:"13px"},children:"Car Wash & Puncture entries will appear here after driver submits and admin approves"})]}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"rgba(0,0,0,0.2)"},children:["Date","Driver","Vehicle","Service","Amount","Receipt"].map(r=>e.jsx("th",{style:{padding:"14px 20px",textAlign:"left",fontSize:"11px",fontWeight:"800",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",letterSpacing:"1px",borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:r},r))})}),e.jsx("tbody",{children:m.map((r,t)=>{const i=(r.notes||"Other").split(",").map(a=>a.trim());return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",background:t%2===0?"rgba(255,255,255,0.01)":"transparent",transition:"background 0.2s"},onMouseOver:a=>a.currentTarget.style.background="rgba(245,158,11,0.05)",onMouseOut:a=>a.currentTarget.style.background=t%2===0?"rgba(255,255,255,0.01)":"transparent",children:[e.jsx("td",{style:{padding:"14px 20px",color:"rgba(255,255,255,0.7)",fontSize:"13px"},children:new Date(r.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("td",{style:{padding:"14px 20px"},children:e.jsx("p",{style:{color:"white",fontWeight:"700",margin:0,fontSize:"13px"},children:r.driver})}),e.jsx("td",{style:{padding:"14px 20px",color:"rgba(255,255,255,0.6)",fontSize:"13px",fontWeight:"600"},children:r.vehicle?.carNumber||"N/A"}),e.jsx("td",{style:{padding:"14px 20px"},children:e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:i.map((a,h)=>e.jsx("span",{style:{background:a.toLowerCase().includes("wash")?"rgba(34,211,238,0.12)":a.toLowerCase().includes("puncture")?"rgba(16,185,129,0.12)":"rgba(245,158,11,0.12)",color:a.toLowerCase().includes("wash")?"#22d3ee":a.toLowerCase().includes("puncture")?"#10b981":"#f59e0b",padding:"3px 10px",borderRadius:"20px",fontSize:"11px",fontWeight:"800",border:`1px solid ${a.toLowerCase().includes("wash")?"rgba(34,211,238,0.2)":a.toLowerCase().includes("puncture")?"rgba(16,185,129,0.2)":"rgba(245,158,11,0.2)"}`,textTransform:"capitalize"},children:a},h))})}),e.jsx("td",{style:{padding:"14px 20px"},children:e.jsxs("span",{style:{color:"#fbbf24",fontWeight:"900",fontSize:"15px"},children:["â‚¹",(Number(r.amount)||0).toLocaleString()]})}),e.jsx("td",{style:{padding:"14px 20px"},children:r.receiptPhoto?e.jsx("img",{src:f(r.receiptPhoto),onClick:()=>{I(r.receiptPhoto),v(!0)},style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"8px",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},alt:"receipt"}):e.jsx("span",{style:{color:"rgba(255,255,255,0.2)",fontSize:"12px"},children:"â€”"})})]},r._id)})})]})})]})]}),(n==="parking"?z.length:C.length)>0&&e.jsxs("div",{style:{marginBottom:"40px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:n==="carservices"?"rgba(245, 158, 11, 0.1)":"rgba(244, 63, 94, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",color:n==="carservices"?"#f59e0b":"#f43f5e"},children:e.jsx(ne,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{style:{color:"white",fontSize:"18px",fontWeight:"800",margin:0},children:"Review Requests"}),e.jsxs("p",{style:{color:n==="carservices"?"rgba(245, 158, 11, 0.6)":"rgba(244, 63, 94, 0.6)",fontSize:"11px",fontWeight:"700",textTransform:"uppercase",margin:0},children:[(n==="parking"?z:C).length," Pending ",n==="carservices"?"Services":"Approvals"]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"20px"},children:(n==="parking"?z:C).map(r=>{const t=r.type==="other"?r.fuelType||"Other Service":"Parking",i=r.type==="other",a=i?"#f59e0b":"#818cf8",h=i?"rgba(245,158,11,0.1)":"rgba(129,140,248,0.1)",l=i?"rgba(245,158,11,0.25)":"rgba(129,140,248,0.25)";return e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"glass-card",style:{padding:"24px",border:`1px solid ${n==="carservices"?"rgba(245, 158, 11, 0.2)":"rgba(244, 63, 94, 0.2)"}`,background:n==="carservices"?"linear-gradient(145deg, rgba(245, 158, 11, 0.05), rgba(15, 23, 42, 0.4))":"linear-gradient(145deg, rgba(244, 63, 94, 0.05), rgba(15, 23, 42, 0.4))",borderRadius:"20px"},children:[e.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"20px"},children:[r.slipPhoto?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:f(r.slipPhoto),onClick:()=>{I(r.slipPhoto),v(!0)},style:{width:"64px",height:"64px",borderRadius:"12px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"}}),e.jsx("div",{style:{position:"absolute",bottom:"-8px",right:"-8px",background:i?"#f59e0b":"#f43f5e",color:"white",padding:"2px 6px",borderRadius:"6px",fontSize:"10px",fontWeight:"900"},children:i?"BILL":"SLIP"})]}):e.jsx("div",{onClick:()=>{I(""),v(!0)},style:{width:"64px",height:"64px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed rgba(255,255,255,0.1)",cursor:"pointer"},children:e.jsx(L,{size:24,color:"rgba(255,255,255,0.2)"})}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"6px"},children:[e.jsxs("h4",{style:{color:"white",fontWeight:"900",fontSize:"22px",margin:0},children:["â‚¹",r.amount]}),e.jsx("span",{style:{background:n==="carservices"?"rgba(245, 158, 11, 0.1)":"rgba(244, 63, 94, 0.1)",color:n==="carservices"?"#f59e0b":"#f43f5e",fontSize:"9px",padding:"3px 8px",borderRadius:"6px",fontWeight:"800",textTransform:"uppercase",border:`1px solid ${n==="carservices"?"rgba(245, 158, 11, 0.2)":"rgba(244, 63, 94, 0.2)"}`},children:"Review"})]}),e.jsx("span",{style:{display:"inline-block",background:h,color:a,fontSize:"10px",padding:"2px 10px",borderRadius:"6px",fontWeight:"800",border:`1px solid ${l}`,marginTop:"6px",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:t}),e.jsx("p",{style:{color:"white",fontSize:"13px",fontWeight:"700",margin:"4px 0 0"},children:r.driver}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"4px",alignItems:"center"},children:[e.jsx("span",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px"},children:r.carNumber}),r.date&&e.jsx("span",{style:{background:"rgba(99,102,241,0.12)",color:"#818cf8",padding:"2px 8px",borderRadius:"6px",fontSize:"10px",fontWeight:"800",border:"1px solid rgba(99,102,241,0.2)"},children:new Date(r.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:()=>E(r.attendanceId,r._id,"approved"),style:{flex:1.5,background:"#10b981",color:"white",border:"none",padding:"12px",borderRadius:"12px",fontWeight:"800",fontSize:"14px",cursor:"pointer",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.2)"},children:"Approve"}),e.jsx("button",{onClick:()=>E(r.attendanceId,r._id,"rejected"),style:{flex:1,background:"rgba(255,255,255,0.03)",color:"rgba(255,255,255,0.6)",border:"1px solid rgba(255,255,255,0.1)",padding:"12px",borderRadius:"12px",fontWeight:"700",fontSize:"14px",cursor:"pointer"},children:"Reject"})]})]},r._id)})})]}),n==="rejected"&&e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.35},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"32px"},children:[{label:"Total Rejected",value:d.length,icon:"ðŸš«",color:"#f43f5e",bg:"rgba(244,63,94,0.08)",border:"rgba(244,63,94,0.2)"},{label:"Parking Rejected",value:d.filter(r=>r.type==="parking").length,icon:"ðŸ…¿ï¸",color:"#818cf8",bg:"rgba(129,140,248,0.08)",border:"rgba(129,140,248,0.2)"},{label:"Services Rejected",value:d.filter(r=>r.type==="other").length,icon:"ðŸš—",color:"#f59e0b",bg:"rgba(245,158,11,0.08)",border:"rgba(245,158,11,0.2)"},{label:"Total Amount",value:`â‚¹${d.reduce((r,t)=>r+(Number(t.amount)||0),0).toLocaleString()}`,icon:"ðŸ’°",color:"#94a3b8",bg:"rgba(148,163,184,0.08)",border:"rgba(148,163,184,0.2)"}].map((r,t)=>e.jsxs(x.div,{whileHover:{y:-4},className:"glass-card",style:{padding:"20px 24px",background:r.bg,border:`1px solid ${r.border}`,borderRadius:"18px",display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("span",{style:{fontSize:"28px"},children:r.icon}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",margin:"0 0 4px",letterSpacing:"1px"},children:r.label}),e.jsx("h2",{style:{color:r.color,fontSize:"24px",fontWeight:"900",margin:0},children:r.value})]})]},t))}),d.length===0?e.jsxs("div",{className:"glass-card",style:{padding:"60px 20px",textAlign:"center",borderRadius:"24px",border:"1px solid rgba(244,63,94,0.1)"},children:[e.jsx("span",{style:{fontSize:"56px",display:"block",marginBottom:"16px"},children:"âœ…"}),e.jsx("h3",{style:{color:"white",fontWeight:"800",margin:"0 0 8px"},children:"No Rejected Entries"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.35)",fontSize:"14px",margin:0},children:"All requests have been approved or are pending review"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},children:[{key:"all",label:"All",count:d.length},{key:"parking",label:"ðŸ…¿ï¸ Parking",count:d.filter(r=>r.type==="parking").length},{key:"other",label:"ðŸš— Services",count:d.filter(r=>r.type==="other").length}].map(r=>(window._rejFilter,r.key,null))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(340px, 1fr))",gap:"16px"},children:d.map(r=>{const t=r.type==="other"?r.fuelType||"Service":"Parking",i=r.type==="other"?"#f59e0b":"#818cf8",a=r.type==="other"?"rgba(245,158,11,0.1)":"rgba(129,140,248,0.1)",h=r.type==="other"?"rgba(245,158,11,0.2)":"rgba(129,140,248,0.2)";return e.jsxs(x.div,{initial:{opacity:0,scale:.97},animate:{opacity:1,scale:1},whileHover:{y:-4,boxShadow:"0 12px 40px rgba(244,63,94,0.15)"},style:{border:"1px solid rgba(244,63,94,0.15)",background:"linear-gradient(145deg, rgba(244,63,94,0.05), rgba(15,23,42,0.7))",borderRadius:"20px",overflow:"hidden",transition:"box-shadow 0.3s"},children:[e.jsx("div",{style:{height:"3px",background:"linear-gradient(90deg, #f43f5e 0%, #f59e0b 50%, transparent 100%)"}}),e.jsxs("div",{style:{padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",gap:"14px",alignItems:"flex-start",marginBottom:"16px"},children:[r.slipPhoto?e.jsxs("div",{style:{position:"relative",flexShrink:0},children:[e.jsx("img",{src:f(r.slipPhoto),onClick:()=>{I(r.slipPhoto),v(!0)},style:{width:"64px",height:"64px",borderRadius:"14px",objectFit:"cover",cursor:"pointer",border:"2px solid rgba(244,63,94,0.25)",filter:"grayscale(10%)"},alt:"slip"}),e.jsx("div",{style:{position:"absolute",top:"-6px",right:"-6px",background:"#f43f5e",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(244,63,94,0.5)"},children:e.jsx(N,{size:11,color:"white"})})]}):e.jsxs("div",{style:{width:"64px",height:"64px",borderRadius:"14px",background:"rgba(244,63,94,0.07)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"2px dashed rgba(244,63,94,0.2)",flexShrink:0,gap:"4px"},children:[e.jsx(L,{size:22,color:"rgba(244,63,94,0.35)"}),e.jsx("span",{style:{color:"rgba(244,63,94,0.35)",fontSize:"8px",fontWeight:"800"},children:"NO SLIP"})]}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{color:"#cbd5e1",fontWeight:"900",fontSize:"24px",letterSpacing:"-0.5px",lineHeight:1,marginBottom:"8px"},children:["â‚¹",(Number(r.amount)||0).toLocaleString()]}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[e.jsx("span",{style:{background:"rgba(244,63,94,0.12)",color:"#f43f5e",padding:"3px 9px",borderRadius:"8px",fontSize:"9px",fontWeight:"900",textTransform:"uppercase",border:"1px solid rgba(244,63,94,0.22)",letterSpacing:"0.5px",whiteSpace:"nowrap"},children:"âœ• REJECTED"}),e.jsx("span",{style:{background:a,color:i,padding:"3px 9px",borderRadius:"8px",fontSize:"9px",fontWeight:"800",textTransform:"uppercase",border:`1px solid ${h}`,whiteSpace:"nowrap"},children:t})]})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.25)",borderRadius:"14px",padding:"14px",marginBottom:"16px",border:"1px solid rgba(255,255,255,0.04)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"8px",background:"rgba(99,102,241,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(W,{size:14,color:"#818cf8"})}),e.jsx("span",{style:{color:"white",fontWeight:"800",fontSize:"14px"},children:r.driver||"Unknown Driver"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(J,{size:12,color:"#64748b"}),e.jsx("span",{style:{color:"#64748b",fontWeight:"700",fontSize:"12px"},children:r.carNumber||"N/A"})]})]}),r.date&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",paddingTop:"8px",borderTop:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx(H,{size:12,color:"#64748b"}),e.jsx("span",{style:{color:"#64748b",fontSize:"12px",fontWeight:"600"},children:new Date(r.date).toLocaleDateString("en-IN",{weekday:"long",day:"2-digit",month:"long",year:"numeric"})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[e.jsx("button",{onClick:()=>E(r.attendanceId,r._id,"approved"),style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",padding:"12px 10px",borderRadius:"12px",fontWeight:"800",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",boxShadow:"0 4px 12px rgba(16,185,129,0.25)",transition:"all 0.2s",letterSpacing:"0.3px"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 8px 20px rgba(16,185,129,0.4)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="0 4px 12px rgba(16,185,129,0.25)"},children:"âœ“ Re-Approve"}),e.jsx("button",{onClick:()=>{window.confirm("Permanently delete this rejected entry? This action cannot be undone.")&&E(r.attendanceId,r._id,"deleted")},style:{background:"rgba(244,63,94,0.08)",color:"#f43f5e",border:"1px solid rgba(244,63,94,0.25)",padding:"12px 10px",borderRadius:"12px",fontWeight:"800",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",transition:"all 0.2s",letterSpacing:"0.3px"},onMouseEnter:l=>{l.currentTarget.style.background="rgba(244,63,94,0.18)",l.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:l=>{l.currentTarget.style.background="rgba(244,63,94,0.08)",l.currentTarget.style.transform="translateY(0)"},children:"ðŸ—‘ Delete Forever"})]})]})]},r._id)})})]})]}),n==="parking"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 260px), 1fr))",gap:"20px",marginBottom:"40px"},children:[e.jsxs(x.div,{whileHover:{y:-5},className:"glass-card",style:{padding:"24px",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(30, 41, 59, 0.4) 100%)",border:"1px solid rgba(99, 102, 241, 0.2)",borderRadius:"20px",display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"rgba(99, 102, 241, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",color:"#818cf8",border:"1px solid rgba(99, 102, 241, 0.2)"},children:e.jsx(Ee,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px",letterSpacing:"1px"},children:"Total Expense"}),e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0},children:["â‚¹",Te.toLocaleString()]})]})]}),e.jsxs(x.div,{whileHover:{y:-5},className:"glass-card",style:{padding:"24px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(30, 41, 59, 0.4) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"20px",display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"rgba(16, 185, 129, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",color:"#34d399",border:"1px solid rgba(16, 185, 129, 0.2)"},children:e.jsx(oe,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px",letterSpacing:"1px"},children:"From Driver Apps"}),e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0},children:["â‚¹",We.toLocaleString()]})]})]}),e.jsxs(x.div,{whileHover:{y:-5},className:"glass-card",style:{padding:"24px",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(30, 41, 59, 0.4) 100%)",border:"1px solid rgba(245, 158, 11, 0.2)",borderRadius:"20px",display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"rgba(245, 158, 11, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fbbf24",border:"1px solid rgba(245, 158, 11, 0.2)"},children:e.jsx(ne,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px",letterSpacing:"1px"},children:"Office Manual"}),e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0},children:["â‚¹",Pe.toLocaleString()]})]})]})]}),e.jsx("div",{className:"glass-card",style:{padding:"0",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:ce?e.jsx("div",{style:{padding:"100px",textAlign:"center"},children:e.jsx("div",{className:"spinner",style:{margin:"0 auto"}})}):w.length===0?e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx(ae,{size:48,style:{color:"rgba(255,255,255,0.1)",marginBottom:"20px"}}),e.jsx("h3",{style:{color:"white",opacity:.6},children:"No parking records found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hide-mobile",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"left",background:"rgba(255,255,255,0.02)"},children:[e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px"},children:"Date"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px"},children:"Driver"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px"},children:"Amount"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px"},children:"Source"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",textAlign:"right",letterSpacing:"1px"},children:"Actions"})]})}),e.jsx("tbody",{children:w.map(r=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.03)",transition:"all 0.2s ease"},className:"hover-row",children:[e.jsx("td",{style:{padding:"18px 25px"},children:e.jsx("div",{style:{color:"white",fontWeight:"700",fontSize:"14px"},children:new Date(r.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})}),e.jsx("td",{style:{padding:"18px 25px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.5)"},children:e.jsx(W,{size:16})}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"white",fontWeight:"600"},children:r.driver}),r.vehicle&&e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",marginTop:"2px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(J,{size:10})," ",r.vehicle.carNumber]})]})]})}),e.jsx("td",{style:{padding:"18px 25px"},children:e.jsxs("div",{style:{color:"#34d399",fontWeight:"800",fontSize:"16px"},children:["â‚¹",r.amount]})}),e.jsx("td",{style:{padding:"18px 25px"},children:e.jsx("span",{style:{fontSize:"9px",padding:"4px 10px",borderRadius:"20px",background:r.source==="Admin"?"rgba(245,158,11,0.1)":"rgba(99,102,241,0.1)",color:r.source==="Admin"?"#fbbf24":"#818cf8",fontWeight:"800",border:`1px solid ${r.source==="Admin"?"rgba(245,158,11,0.2)":"rgba(99,102,241,0.2)"}`,textTransform:"uppercase",letterSpacing:"0.5px"},children:r.source})}),e.jsx("td",{style:{padding:"18px 25px",textAlign:"right"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{I(r.receiptPhoto||""),v(!0)},style:{width:"36px",height:"36px",borderRadius:"10px",background:r.receiptPhoto?"rgba(16, 185, 129, 0.1)":"rgba(244, 63, 94, 0.05)",color:r.receiptPhoto?"#10b981":"#f43f5e",border:"1px solid rgba(16, 185, 129, 0.2)",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",opacity:r.receiptPhoto?1:.6},title:r.receiptPhoto?"View Photo":"Photo Missing",children:e.jsx(L,{size:16,style:{opacity:r.receiptPhoto?1:.5}})}),e.jsx("button",{onClick:()=>Ce(r),style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(99, 102, 241, 0.1)",color:"#818cf8",border:"1px solid rgba(99, 102, 241, 0.2)",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},title:"Edit Entry",children:e.jsx(Le,{size:16})}),e.jsx("button",{onClick:()=>re(r._id),style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(244,63,94,0.1)",color:"#f43f5e",border:"1px solid rgba(244,63,94,0.2)",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},onMouseOver:t=>{t.currentTarget.style.background="#f43f5e",t.currentTarget.style.color="white"},onMouseOut:t=>{t.currentTarget.style.background="rgba(244,63,94,0.1)",t.currentTarget.style.color="#f43f5e"},children:e.jsx(se,{size:16})})]})})]},r._id))})]})}),e.jsx("div",{className:"show-mobile",style:{padding:"15px",display:"flex",flexDirection:"column",gap:"15px"},children:w.map(r=>e.jsxs(x.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},style:{background:"rgba(255,255,255,0.02)",borderRadius:"20px",padding:"20px",border:"1px solid rgba(255,255,255,0.05)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"4px",height:"100%",background:r.source==="Admin"?"#fbbf24":"#818cf8",opacity:.6}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.5)"},children:e.jsx(W,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"white",fontWeight:"800",fontSize:"16px",letterSpacing:"0.5px"},children:r.driver}),e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",marginTop:"2px",fontWeight:"700",display:"flex",alignItems:"center",gap:"5px"},children:[new Date(r.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}),r.vehicle&&e.jsxs("span",{style:{opacity:.6},children:["â€¢ ",r.vehicle.carNumber]})]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{color:"#34d399",fontWeight:"900",fontSize:"20px"},children:["â‚¹",r.amount]}),e.jsx("span",{style:{fontSize:"8px",padding:"2px 8px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.5)",fontWeight:"900",textTransform:"uppercase",border:"1px solid rgba(255,255,255,0.1)"},children:r.source})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"12px",marginBottom:"16px",padding:"12px",background:"rgba(0,0,0,0.2)",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.03)"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"9px",color:"rgba(255,255,255,0.3)",textTransform:"uppercase",fontWeight:"800",marginBottom:"2px"},children:"Location"}),e.jsx("div",{style:{color:"white",fontSize:"13px",fontWeight:"700"},children:r.location||"Not Specified"})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontStyle:"italic",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(oe,{size:12})," ",r.remark||"No additional remarks"]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[r.receiptPhoto&&e.jsx("button",{onClick:()=>{I(r.receiptPhoto),v(!0)},style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(16, 185, 129, 0.1)",color:"#10b981",border:"1px solid rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(L,{size:14})}),e.jsx("button",{onClick:()=>re(r._id),style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(244,63,94,0.1)",color:"#f43f5e",border:"1px solid rgba(244,63,94,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(se,{size:14})})]})]})]},r._id))})]})}),e.jsxs($e,{children:[xe&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(16px)",zIndex:1100,display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"15px",overflowY:"auto"},children:e.jsxs(x.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},className:"premium-glass",style:{width:"100%",maxWidth:"500px",padding:"0",border:"1px solid rgba(255,255,255,0.1)",background:"#0f172a",overflow:"visible",margin:"auto",borderRadius:"24px"},children:[e.jsxs("div",{style:{padding:"24px 30px",background:"linear-gradient(to right, #1e293b, #0f172a)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:10,borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"white",fontSize:"20px",margin:0,fontWeight:"800"},children:A?"Edit Entry":"Manual Entry"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"700",textTransform:"uppercase",margin:"4px 0 0"},children:"Parking Record"})]}),e.jsx("button",{onClick:()=>T(!1),style:{background:"rgba(255,255,255,0.05)",color:"white",borderRadius:"50%",padding:"10px",border:"none",cursor:"pointer"},children:e.jsx(N,{size:18})})]}),e.jsx("form",{onSubmit:ze,style:{padding:"clamp(20px, 5vw, 30px)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"25px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 200px), 1fr))",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"800",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:"Vehicle *"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(J,{size:18,style:{position:"absolute",left:"15px",top:"16px",color:"var(--primary)"}}),e.jsxs("select",{className:"input-field",style:{height:"52px",borderRadius:"14px",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:"white",padding:"0 15px 0 45px",width:"100%",outline:"none",cursor:"pointer"},value:p.vehicleId||"",onChange:r=>j({...p,vehicleId:r.target.value}),required:!0,children:[e.jsx("option",{value:"",style:{background:"#0f172a"},children:"Select Vehicle"}),ge.map(r=>e.jsx("option",{value:r._id,style:{background:"#0f172a"},children:r.carNumber},r._id))]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"800",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:"Driver *"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(W,{size:18,style:{position:"absolute",left:"15px",top:"16px",color:"var(--primary)"}}),e.jsxs("select",{className:"input-field",style:{height:"52px",borderRadius:"14px",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:"white",padding:"0 15px 0 45px",width:"100%",outline:"none",cursor:"pointer"},value:p.driverId||"",onChange:r=>{const t=y.find(i=>i._id===r.target.value);j({...p,driverId:r.target.value,driver:t?t.name:""})},required:!0,children:[e.jsx("option",{value:"",style:{background:"#0f172a"},children:"Select Driver"}),y.map(r=>e.jsx("option",{value:r._id,style:{background:"#0f172a"},children:r.name},r._id))]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 200px), 1fr))",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"800",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:"Amount (â‚¹) *"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("span",{style:{position:"absolute",left:"15px",top:"16px",color:"#34d399",fontWeight:"900"},children:"â‚¹"}),e.jsx("input",{type:"number",placeholder:"0.00",className:"input-field",style:{height:"52px",borderRadius:"14px",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:"white",padding:"0 15px 0 32px",width:"100%",outline:"none"},value:p.amount,onChange:r=>j({...p,amount:r.target.value}),required:!0})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"11px",fontWeight:"800",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",letterSpacing:"1px"},children:"Date *"}),e.jsx("input",{type:"date",className:"input-field",style:{height:"52px",borderRadius:"14px",background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.08)",color:"white",padding:"0 15px",width:"100%",outline:"none",colorScheme:"dark"},value:p.date,onChange:r=>j({...p,date:r.target.value}),required:!0})]})]}),e.jsxs("div",{style:{padding:"20px",background:"rgba(255,255,255,0.02)",borderRadius:"16px",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"12px"},children:"Parking Receipt Photo"}),e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center",flexWrap:"wrap"},children:[p.receiptPhoto?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:f(p.receiptPhoto),alt:"Receipt",style:{width:"80px",height:"80px",borderRadius:"12px",objectFit:"cover",border:"1px solid rgba(255,255,255,0.1)"}}),e.jsx("button",{type:"button",onClick:()=>j({...p,receiptPhoto:""}),style:{position:"absolute",top:"-8px",right:"-8px",background:"#f43f5e",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(N,{size:14})})]}):e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("div",{onClick:()=>K(!0),style:{width:"80px",height:"80px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer",border:"1px dashed rgba(255,255,255,0.1)",transition:"all 0.3s ease"},children:[e.jsx(de,{size:20,color:"var(--text-muted)"}),e.jsx("span",{style:{fontSize:"10px",color:"var(--text-muted)",marginTop:"4px"},children:"Camera"})]}),e.jsxs("label",{style:{width:"80px",height:"80px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer",border:"1px dashed rgba(255,255,255,0.1)",transition:"all 0.3s ease"},children:[e.jsx(le,{size:20,color:"var(--text-muted)"}),e.jsx("span",{style:{fontSize:"10px",color:"var(--text-muted)",marginTop:"4px"},children:"Gallery"}),e.jsx("input",{type:"file",hidden:!0,onChange:te,accept:"image/*"})]})]}),e.jsxs("div",{style:{flex:"1 1 200px"},children:[e.jsx("p",{style:{margin:0,fontSize:"12px",color:"rgba(255,255,255,0.6)"},children:"Upload or capture a photo of the parking receipt."}),e.jsx("p",{style:{margin:"4px 0 0",color:"var(--text-muted)",fontSize:"10px"},children:"Max size: 5MB (JPG, PNG)"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px"},children:[e.jsx("button",{type:"submit",disabled:G,className:"btn-primary",style:{height:"56px",borderRadius:"14px",fontWeight:"900",fontSize:"16px",background:"linear-gradient(135deg, #fbbf24 0%, #d97706 100%)",color:"black",border:"none"},children:G?"Saving...":A?"Update Record":"Save Record"}),e.jsx("button",{type:"button",onClick:()=>T(!1),style:{height:"56px",background:"rgba(255,255,255,0.05)",color:"white",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"14px",fontWeight:"700",cursor:"pointer"},children:"Cancel"})]})]})})]})}),fe&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(2, 6, 23, 0.95)",backdropFilter:"blur(20px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999,padding:"20px"},onClick:()=>v(!1),children:e.jsxs(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{position:"relative",maxWidth:"min(700px, 90vw)",width:"100%",display:"flex",justifyContent:"center"},onClick:r=>r.stopPropagation(),children:[Q?e.jsx("img",{src:f(Q),alt:"Parking Photo",style:{width:"100%",height:"auto",maxHeight:"85vh",objectFit:"contain",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"}}):e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"50px",borderRadius:"20px",textAlign:"center",width:"100%"},children:[e.jsx(le,{size:48,style:{opacity:.2,marginBottom:"15px"}}),e.jsx("p",{style:{color:"white",fontWeight:"700"},children:"No receipt image available."}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"13px",marginTop:"10px"},children:"To fix this: Click the Edit (Pen) icon on the entry and upload the receipt manually."})]}),e.jsx("button",{onClick:()=>v(!1),style:{position:"absolute",top:"-15px",right:"-15px",background:"#f43f5e",color:"white",border:"none",width:"36px",height:"36px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 5px 15px rgba(244, 63, 94, 0.4)",zIndex:100},children:e.jsx(N,{size:20})})]})}),ye&&e.jsx(He,{onClose:()=>K(!1),onCapture:r=>te(r)})]})]})]})};export{Ye as default};
