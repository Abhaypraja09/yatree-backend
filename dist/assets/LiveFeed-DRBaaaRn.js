import{b as c,j as e,A as W,o as L,p as T,q as O,C as f,U as y,a9 as P,O as F,k as E,m as g,P as N,F as m,x as A,M as B}from"./vendor-DbctvGWH.js";import{u as M,b as U,i as $}from"./index-DWUfvi34.js";import{S as H}from"./SEO-FujI0jRl.js";const Q=()=>{const{user:K}=M(),{selectedCompany:h,selectedDate:o,setSelectedDate:u}=U(),[x,k]=c.useState(null),[V,j]=c.useState(!0),[r,I]=c.useState("vehicles"),[a,z]=c.useState(""),w=c.useRef(null),C=t=>new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),v=async()=>{if(h){j(!0);try{const t=localStorage.getItem("userInfo"),i=JSON.parse(t),{data:s}=await $.get(`/api/admin/dashboard/${h._id}?date=${o}`,{headers:{Authorization:`Bearer ${i.token}`}});k(s)}catch(t){console.error("Error fetching feed",t)}finally{j(!1)}}};c.useEffect(()=>{v();const t=setInterval(v,6e4);return()=>clearInterval(t)},[h,o]);const R=x?.liveDriversFeed?.filter(t=>t.name.toLowerCase().includes(a.toLowerCase())||t.mobile.includes(a))||[],D=x?.liveVehiclesFeed?.filter(t=>t.carNumber.toLowerCase().includes(a.toLowerCase())||t.model.toLowerCase().includes(a.toLowerCase()))||[],S=(x?.dutyHistoryThisMonth||[]).filter(t=>new Date(t.date)<=new Date(o)).filter(t=>a===""||t.driver?.name?.toLowerCase().includes(a.toLowerCase())||t.vehicle?.carNumber?.toLowerCase().includes(a.toLowerCase())),b=({id:t,label:i,icon:s,count:n})=>e.jsxs("button",{onClick:()=>I(t),style:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 24px",borderRadius:"14px",border:"none",background:r===t?"rgba(255, 255, 255, 0.1)":"transparent",color:r===t?"white":"rgba(255, 255, 255, 0.5)",fontWeight:"800",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[e.jsx(s,{size:18,strokeWidth:r===t?2.5:2}),e.jsx("span",{style:{fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:i}),n!==void 0&&e.jsx("span",{style:{background:r===t?"#0ea5e9":"rgba(255,255,255,0.1)",color:r===t?"white":"rgba(255,255,255,0.4)",padding:"2px 8px",borderRadius:"8px",fontSize:"11px",marginLeft:"4px"},children:n}),r===t&&e.jsx(g.div,{layoutId:"activeTab",style:{position:"absolute",bottom:0,left:"20%",right:"20%",height:"3px",background:"#0ea5e9",borderRadius:"10px 10px 0 0"}})]});return e.jsxs("div",{style:{padding:"clamp(15px, 4vw, 40px)",minHeight:"100vh",background:"radial-gradient(circle at top right, #1e293b, #0f172a)"},children:[e.jsx(H,{title:"Live Fleet Control",description:"Real-time mission control for drivers and vehicles."}),e.jsx("header",{style:{marginBottom:"30px"},children:e.jsxs("div",{className:"mobile-stack",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"18px"},children:[e.jsx("div",{style:{width:"clamp(46px, 10vw, 56px)",height:"clamp(46px, 10vw, 56px)",background:"linear-gradient(135deg, #0ea5e9, #6366f1)",borderRadius:"16px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 10px 25px rgba(14, 165, 233, 0.3)",border:"1px solid rgba(255,255,255,0.2)",flexShrink:0},children:e.jsx(W,{size:26,color:"white"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",boxShadow:"0 0 10px #10b981"}}),e.jsx("span",{style:{fontSize:"10px",fontWeight:"900",color:"rgba(255,255,255,0.5)",letterSpacing:"1.5px",textTransform:"uppercase"},children:"LIVE MISSION CONTROL"})]}),e.jsxs("h1",{style:{color:"white",fontSize:"clamp(24px, 6vw, 40px)",fontWeight:"950",margin:0,letterSpacing:"-2px"},children:["Live ",e.jsx("span",{style:{color:"#0ea5e9"},children:"Feed"})," Hub"]})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",padding:"6px",borderRadius:"16px",display:"flex",gap:"4px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("button",{onClick:()=>{const t=new Date(o);t.setDate(t.getDate()-1),u(t.toISOString().split("T")[0])},style:{width:"36px",height:"36px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"none",color:"white",cursor:"pointer"},children:e.jsx(L,{size:20})}),e.jsxs("div",{onClick:()=>w.current?.showPicker(),style:{height:"36px",padding:"0 16px",borderRadius:"12px",background:"rgba(255,255,255,0.08)",display:"flex",alignItems:"center",gap:"10px",color:"white",fontWeight:"800",fontSize:"13px",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx(T,{size:16,color:"#0ea5e9"}),C(o),e.jsx("input",{type:"date",ref:w,value:o,onChange:t=>u(t.target.value),style:{visibility:"hidden",width:0,position:"absolute"}})]}),e.jsx("button",{onClick:()=>{const t=new Date(o);t.setDate(t.getDate()+1),u(t.toISOString().split("T")[0])},style:{width:"36px",height:"36px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"none",color:"white",cursor:"pointer"},children:e.jsx(O,{size:20})})]})})]})}),e.jsxs("div",{className:"glass-card",style:{padding:"0",background:"rgba(30, 41, 59, 0.4)",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.05)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px 15px",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",gap:"15px",background:"rgba(0,0,0,0.1)"},children:[e.jsxs("div",{className:"premium-scroll",style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"5px"},children:[e.jsx(b,{id:"vehicles",label:"Fleet",icon:f,count:x?.totalVehicles}),e.jsx(b,{id:"drivers",label:"Drivers",icon:y,count:x?.liveDriversFeed?.length}),e.jsx(b,{id:"history",label:"Activity",icon:P})]}),e.jsxs("div",{style:{position:"relative",width:"100%"},children:[e.jsx(F,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"rgba(255,255,255,0.3)"},size:16}),e.jsx("input",{type:"text",placeholder:`Search ${r}...`,value:a,onChange:t=>z(t.target.value),style:{width:"100%",padding:"12px 15px 12px 40px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",color:"white",fontSize:"14px",fontWeight:"600",outline:"none"}})]})]}),e.jsx("div",{style:{padding:"clamp(15px, 3vw, 25px)",minHeight:"60vh"},className:"custom-scrollbar",children:e.jsxs(E,{mode:"wait",children:[r==="drivers"&&e.jsx(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(min(100%, 280px), 1fr))",gap:"15px"},children:R.sort((t,i)=>{const s={Present:1,Completed:2,Lapsed:3,Absent:4};return(s[t.status]||99)-(s[i.status]||99)}).map(t=>e.jsxs("div",{style:{padding:"16px",background:t.status==="Present"?"rgba(16, 185, 129, 0.05)":t.status==="Completed"?"rgba(139, 92, 246, 0.05)":"rgba(255,255,255,0.02)",borderRadius:"20px",border:`1px solid ${t.status==="Present"?"rgba(16, 185, 129, 0.15)":t.status==="Completed"?"rgba(139, 92, 246, 0.15)":"rgba(255,255,255,0.05)"}`,display:"flex",alignItems:"center",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center",flex:1,minWidth:0},children:[e.jsxs("div",{style:{position:"relative",flexShrink:0},children:[e.jsx("div",{style:{width:"46px",height:"46px",borderRadius:"14px",background:t.isFreelancer?"rgba(129, 140, 248, 0.1)":"rgba(255,255,255,0.05)",display:"flex",justifyContent:"center",alignItems:"center",border:`1px solid ${t.isFreelancer?"rgba(129, 140, 248, 0.2)":"rgba(255,255,255,0.1)"}`},children:e.jsx(y,{size:20,color:t.status==="Present"?"#10b981":t.status==="Completed"?"#8b5cf6":t.isFreelancer?"#818cf8":"rgba(255,255,255,0.3)"})}),e.jsx("div",{style:{position:"absolute",bottom:"-2px",right:"-2px",width:"12px",height:"12px",borderRadius:"50%",background:t.status==="Present"?"#10b981":t.status==="Completed"?"#8b5cf6":"#334155",border:"3px solid #1e293b",boxShadow:t.status==="Present"?"0 0 10px #10b981":t.status==="Completed"?"0 0 10px #8b5cf6":"none"}})]}),e.jsxs("div",{style:{overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsx("h4",{style:{margin:0,color:"white",fontSize:"14px",fontWeight:"800",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.name}),!t.isFreelancer&&e.jsx("span",{style:{fontSize:"9px",background:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.6)",padding:"2px 6px",borderRadius:"4px",fontWeight:"800",letterSpacing:"0.5px"},children:"CO."}),t.isFreelancer&&e.jsx("span",{style:{fontSize:"9px",background:"rgba(129, 140, 248, 0.15)",color:"#818cf8",padding:"2px 6px",borderRadius:"4px",fontWeight:"800",letterSpacing:"0.5px"},children:"FREELANCER"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"2px"},children:[e.jsx(N,{size:10,color:"rgba(255,255,255,0.3)"}),e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",fontWeight:"700"},children:t.mobile})]})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",flexShrink:0},children:["Present","Completed","Lapsed"].includes(t.status)?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:t.attendances&&t.attendances.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px",alignItems:"flex-end"},children:t.attendances.map((i,s)=>{let n="ON DUTY",l="#10b98120",p="#10b981",d="rgba(16, 185, 129, 0.2)";return i.status==="completed"?(n="COMPLETED",l="#8b5cf620",p="#8b5cf6",d="rgba(139, 92, 246, 0.2)"):i.status==="incomplete"&&t.status==="Lapsed"&&(n="LAPSED",l="#f59e0b20",p="#f59e0b",d="rgba(245, 158, 11, 0.2)"),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"4px",paddingTop:s>0?"6px":"0",borderTop:s>0?"1px dashed rgba(255,255,255,0.05)":"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.vehicle?.carNumber&&e.jsxs("div",{style:{fontSize:"10px",color:"#0ea5e9",fontWeight:"800",background:"rgba(14, 165, 233, 0.1)",padding:"3px 6px",borderRadius:"6px"},children:["#",i.vehicle.carNumber.split("#")[0].slice(-4)]}),e.jsxs("span",{style:{fontSize:"9px",background:l,color:p,padding:"3px 8px",borderRadius:"6px",fontWeight:"800",border:`1px solid ${d}`,whiteSpace:"nowrap"},children:[n," ",t.attendances.length>1?`#${s+1}`:""]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",fontSize:"9px",color:"rgba(255,255,255,0.5)",fontWeight:"600"},children:[i.punchIn?.time&&e.jsxs("span",{children:["IN: ",new Date(i.punchIn.time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]}),i.punchOut?.time&&e.jsxs("span",{children:["| OUT: ",new Date(i.punchOut.time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]})]},s)})}):e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.15)",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px"},children:"Off Duty"})}):e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.15)",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px",background:"rgba(255,255,255,0.02)",padding:"4px 10px",borderRadius:"6px"},children:"Absent"})})]},t._id))},"drivers"),r==="vehicles"&&e.jsx(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(min(100%, 280px), 1fr))",gap:"15px"},children:D.sort((t,i)=>t.status!=="Idle"?-1:1).map(t=>e.jsxs("div",{style:{padding:"16px",background:t.status!=="Idle"?"rgba(14, 165, 233, 0.05)":"rgba(255,255,255,0.02)",borderRadius:"20px",border:`1px solid ${t.status!=="Idle"?"rgba(14, 165, 233, 0.15)":"rgba(255,255,255,0.05)"}`,alignItems:"center",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center",flex:1,minWidth:0},children:[e.jsx("div",{style:{width:"48px",height:"48px",flexShrink:0,borderRadius:"14px",background:"rgba(255,255,255,0.05)",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx(f,{size:24,color:t.status!=="Idle"?"#0ea5e9":"rgba(255,255,255,0.3)"})}),e.jsxs("div",{style:{overflow:"hidden"},children:[e.jsx("h4",{style:{margin:0,color:"white",fontSize:"15px",fontWeight:"900",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.carNumber.split("#")[0]}),e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",fontWeight:"700"},children:t.model})]})]}),e.jsx("div",{style:{flexShrink:0,display:"flex",justifyContent:"flex-end"},children:t.attendances&&t.attendances.length>0?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end",width:"100%"},children:[t.fuelAmount>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",background:"rgba(245, 158, 11, 0.1)",padding:"3px 8px",borderRadius:"6px",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsx(m,{size:12,color:"#f59e0b"}),e.jsxs("span",{style:{fontSize:"11px",color:"#f59e0b",fontWeight:"800"},children:["â‚¹",t.fuelAmount]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px",alignItems:"flex-end"},children:t.attendances.map((i,s)=>{let n="ON DUTY",l="#0ea5e920",p="#0ea5e9",d="rgba(14, 165, 233, 0.3)";return i.status==="completed"?(n="COMPLETED",l="#8b5cf620",p="#8b5cf6",d="rgba(139, 92, 246, 0.3)"):i.status==="incomplete"&&t.status==="Lapsed"&&(n="LAPSED",l="#f59e0b20",p="#f59e0b",d="rgba(245, 158, 11, 0.3)"),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"4px",paddingTop:s>0?"6px":"0",borderTop:s>0?"1px dashed rgba(255,255,255,0.05)":"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.driver?.name&&e.jsxs("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.7)",fontWeight:"800"},children:["ðŸ‘¤ ",i.driver.name]}),e.jsxs("span",{style:{fontSize:"9px",background:l,color:p,padding:"3px 8px",borderRadius:"6px",fontWeight:"800",border:`1px solid ${d}`,whiteSpace:"nowrap"},children:[n," ",t.attendances.length>1?`#${s+1}`:""]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",fontSize:"9px",color:"rgba(255,255,255,0.5)",fontWeight:"600"},children:[i.punchIn?.time&&e.jsxs("span",{children:["IN: ",new Date(i.punchIn.time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]}),i.punchOut?.time&&e.jsxs("span",{children:["| OUT: ",new Date(i.punchOut.time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]})]},s)})})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:[t.fuelAmount>0&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",background:"rgba(245, 158, 11, 0.1)",padding:"3px 8px",borderRadius:"6px",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsx(m,{size:12,color:"#f59e0b"}),e.jsxs("span",{style:{fontSize:"11px",color:"#f59e0b",fontWeight:"800"},children:["â‚¹",t.fuelAmount]})]}),e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.2)",fontWeight:"900",letterSpacing:"1px",padding:"4px 10px",background:"rgba(255,255,255,0.02)",borderRadius:"6px"},children:"IDLE"})]})})]},t._id))},"vehicles"),r==="history"&&e.jsx(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},style:{display:"flex",flexDirection:"column",gap:"10px"},children:S.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"rgba(255,255,255,0.2)"},children:[e.jsx(A,{size:40,style:{marginBottom:"10px",opacity:.5}}),e.jsx("p",{style:{fontWeight:"700"},children:"No activity logs for this date."})]}):S.map(t=>e.jsxs("div",{style:{padding:"20px",background:"rgba(255,255,255,0.02)",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("div",{style:{padding:"6px 12px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",color:"white",fontWeight:"900",fontSize:"12px"},children:new Date(t.date).toLocaleDateString("en-GB")}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx(y,{size:16,color:"#8b5cf6"}),e.jsx("span",{style:{color:"white",fontWeight:"800",fontSize:"13px"},children:t.driver?.name||"Unknown Driver"}),e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)"},children:t.driver?.mobile})]}),e.jsx("div",{style:{width:"1px",height:"14px",background:"rgba(255,255,255,0.2)"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx(f,{size:16,color:"#0ea5e9"}),e.jsx("span",{style:{color:"#0ea5e9",fontWeight:"800",fontSize:"13px"},children:t.vehicle?.carNumber?.split("#")[0]||"Unknown Vehicle"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[t.fuel&&t.fuel.amount>0&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",background:"rgba(245, 158, 11, 0.1)",padding:"4px 10px",borderRadius:"6px",color:"#f59e0b",fontSize:"11px",fontWeight:"800"},children:[e.jsx(m,{size:12})," â‚¹",t.fuel.amount," Fuel"]}),(()=>{const i=t.approvedExpenses?.find(s=>s.type==="parking");return i&&i.amount>0?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",background:"rgba(56, 189, 248, 0.1)",padding:"4px 10px",borderRadius:"6px",color:"#38bdf8",fontSize:"11px",fontWeight:"800"},children:[e.jsx(B,{size:12})," â‚¹",i.amount," Parking"]}):null})(),t.status==="completed"?e.jsx("span",{style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981",padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:"800",border:"1px solid rgba(16, 185, 129, 0.3)"},children:"DUTY COMPLETED"}):e.jsx("span",{style:{background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:"800",border:"1px solid rgba(244, 63, 94, 0.3)"},children:"ON DUTY"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",background:"rgba(0,0,0,0.2)",padding:"15px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.5)",fontWeight:"800",marginBottom:"4px",textTransform:"uppercase"},children:"Punch In"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px"},children:[e.jsx("span",{style:{color:"#10b981",fontSize:"16px",fontWeight:"900"},children:t.punchIn?.time?new Date(t.punchIn.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"}),e.jsxs("span",{style:{color:"rgba(255,255,255,0.6)",fontSize:"12px",fontWeight:"700"},children:[t.punchIn?.km||0," KM"]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"8px"},children:[t.punchIn?.selfie&&e.jsx("img",{src:t.punchIn.selfie,onClick:()=>window.open(t.punchIn.selfie),style:{width:"40px",height:"40px",borderRadius:"4px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},title:"Driver Selfie",loading:"lazy"}),t.punchIn?.kmPhoto&&e.jsx("img",{src:t.punchIn.kmPhoto,onClick:()=>window.open(t.punchIn.kmPhoto),style:{width:"40px",height:"40px",borderRadius:"4px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},title:"Meter Reading",loading:"lazy"}),t.punchIn?.carSelfie&&e.jsx("img",{src:t.punchIn.carSelfie,onClick:()=>window.open(t.punchIn.carSelfie),style:{width:"40px",height:"40px",borderRadius:"4px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},title:"Car Photo",loading:"lazy"})]})]}),e.jsxs("div",{style:{borderLeft:"1px solid rgba(255,255,255,0.05)",paddingLeft:"15px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.5)",fontWeight:"800",marginBottom:"4px",textTransform:"uppercase"},children:"Punch Out"}),t.punchOut?.time?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px"},children:[e.jsx("span",{style:{color:"#f43f5e",fontSize:"16px",fontWeight:"900"},children:new Date(t.punchOut.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsxs("span",{style:{color:"rgba(255,255,255,0.6)",fontSize:"12px",fontWeight:"700"},children:[t.punchOut.km||0," KM"]})]}),e.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"8px"},children:[t.punchOut?.selfie&&e.jsx("img",{src:t.punchOut.selfie,onClick:()=>window.open(t.punchOut.selfie),style:{width:"40px",height:"40px",borderRadius:"4px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},title:"Driver Selfie",loading:"lazy"}),t.punchOut?.kmPhoto&&e.jsx("img",{src:t.punchOut.kmPhoto,onClick:()=>window.open(t.punchOut.kmPhoto),style:{width:"40px",height:"40px",borderRadius:"4px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},title:"Meter Reading",loading:"lazy"}),t.punchOut?.carSelfie&&e.jsx("img",{src:t.punchOut.carSelfie,onClick:()=>window.open(t.punchOut.carSelfie),style:{width:"40px",height:"40px",borderRadius:"4px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},title:"Car Photo",loading:"lazy"})]})]}):e.jsxs("div",{style:{color:"#38bdf8",fontSize:"12px",fontWeight:"800",marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(g.div,{animate:{opacity:[.3,1,.3]},transition:{repeat:1/0,duration:2},style:{width:"8px",height:"8px",borderRadius:"50%",background:"#38bdf8"}}),"IN PROGRESS"]})]}),(t.fuel?.slipPhoto||t.approvedExpenses?.some(i=>i.receiptPhoto))&&e.jsxs("div",{style:{borderLeft:"1px solid rgba(255,255,255,0.05)",paddingLeft:"15px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.5)",fontWeight:"800",marginBottom:"4px",textTransform:"uppercase"},children:"Evidence"}),e.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:[t.fuel?.slipPhoto&&e.jsx("img",{src:t.fuel.slipPhoto,onClick:()=>window.open(t.fuel.slipPhoto),style:{width:"40px",height:"40px",borderRadius:"4px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},title:"Fuel Slip",loading:"lazy"}),t.approvedExpenses?.map((i,s)=>i.receiptPhoto&&e.jsx("img",{src:i.receiptPhoto,onClick:()=>window.open(i.receiptPhoto),style:{width:"40px",height:"40px",borderRadius:"4px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},title:`${i.type} Receipt`,loading:"lazy"},s))]})]}),e.jsxs("div",{style:{borderLeft:"1px solid rgba(255,255,255,0.05)",paddingLeft:"15px",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)",fontWeight:"800"},children:"Total Duty KM:"}),e.jsxs("span",{style:{fontSize:"16px",color:"white",fontWeight:"900"},children:[t.totalKM||0," ",e.jsx("span",{style:{fontSize:"10px",opacity:.5},children:"KM"})]})]}),t.status==="completed"&&t.punchOut?.time&&t.punchIn?.time&&(()=>{const i=((new Date(t.punchOut.time)-new Date(t.punchIn.time))/36e5).toFixed(1);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:[e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)",fontWeight:"800"},children:"Duration:"}),e.jsxs("span",{style:{fontSize:"13px",color:"#8b5cf6",fontWeight:"900"},children:[i," Hours"]})]})})()]})]})]},t._id))},"history")]})})]}),e.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar { width: 6px; }
                .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); borderRadius: 10px; }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }
                .glass-card { backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); }
            `})]})};export{Q as default};
