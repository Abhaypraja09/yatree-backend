import{b as s,j as e,F as P,O as je,ae as ve,Q as O,m as g,a6 as q,D as Se,af as we,t as ke,a8 as ze,C as Ce,w as Ie,V as te,n as Te,ag as ie,J as re,k as ae,X as k,ah as A}from"./vendor-TyV2iwV4.js";import{b as Ne,i as f}from"./index-C6mXxW19.js";import{u as $,w as Re}from"./excel-LJBYwT0Y.js";import{S as We}from"./SEO-D2v4-A60.js";const De=({onCapture:p,onClose:y})=>{const v=s.useRef(null),I=s.useRef(null),b=s.useRef(null),[z,T]=s.useState(null);s.useEffect(()=>(B(),()=>S()),[]);const B=async()=>{try{const c={video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}},l=await navigator.mediaDevices.getUserMedia(c);b.current=l,v.current&&(v.current.srcObject=l)}catch(c){console.error("Camera error:",c),T("Could not access camera. Please allow permissions.")}},S=()=>{b.current&&(b.current.getTracks().forEach(c=>c.stop()),b.current=null)},N=()=>{const c=v.current,l=I.current;c&&l&&(l.width=c.videoWidth,l.height=c.videoHeight,l.getContext("2d").drawImage(c,0,0,l.width,l.height),l.toBlob(C=>{const h=new File([C],"fuel_slip.jpg",{type:"image/jpeg"});p(h),S(),y()},"image/jpeg",.8))};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#1e293b",padding:"20px",borderRadius:"16px",width:"90%",maxWidth:"500px",position:"relative"},children:[e.jsx("button",{type:"button",onClick:()=>{S(),y()},style:{position:"absolute",top:"10px",right:"10px",background:"none",border:"none",color:"white",cursor:"pointer"},children:e.jsx(k,{size:24})}),e.jsx("h3",{style:{color:"white",marginBottom:"20px",textAlign:"center",marginTop:"10px"},children:"Take Photo"}),z?e.jsx("div",{style:{color:"#f43f5e",textAlign:"center",padding:"20px"},children:z}):e.jsx("video",{ref:v,autoPlay:!0,playsInline:!0,style:{width:"100%",borderRadius:"12px",background:"#000",marginBottom:"20px",maxHeight:"60vh",objectFit:"cover"}}),e.jsx("canvas",{ref:I,style:{display:"none"}}),!z&&e.jsxs("button",{type:"button",onClick:N,style:{width:"100%",padding:"16px",background:"#10b981",color:"white",border:"none",borderRadius:"12px",fontWeight:"bold",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer"},children:[e.jsx(A,{size:20})," Capture Photo"]})]})})},Fe=()=>{const{selectedCompany:p}=Ne(),y=t=>t?t.startsWith("http")?t.replace(/^http:\/\//i,"https://"):`${"".replace(/\/+$/,"")}/${t.replace(/^\/+/,"")}`:"",[v,I]=s.useState([]),[b,z]=s.useState([]),[T,B]=s.useState([]),[S,N]=s.useState(!0),[c,l]=s.useState(!1),[U,C]=s.useState(!1),[h,oe]=s.useState(null),[R,se]=s.useState(""),[L,ne]=s.useState("All"),[j,V]=s.useState({from:new Date(Date.now()-4320*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[i,n]=s.useState({vehicleId:"",fuelType:"Diesel",date:new Date().toISOString().split("T")[0],amount:"",quantity:"",rate:"",odometer:"",stationName:"",paymentMode:"Cash",paymentSource:"Yatree Office",driver:"",slipPhoto:""}),[K,J]=s.useState(!1),[W,Y]=s.useState(null),[le,m]=s.useState(!1),[H,w]=s.useState(""),[de,F]=s.useState(!1);s.useEffect(()=>{p&&(D(),G(),pe())},[p,j]);const G=async()=>{if(p?._id)try{const t=localStorage.getItem("userInfo"),r=t?JSON.parse(t):null;if(!r?.token)return;const{data:a}=await f.get(`/api/admin/fuel/pending/${p._id}`,{headers:{Authorization:`Bearer ${r.token}`}});B(a||[])}catch(t){console.error(t)}},D=async()=>{if(p?._id){N(!0);try{const t=localStorage.getItem("userInfo"),r=t?JSON.parse(t):null;if(!r?.token)return;const{data:a}=await f.get(`/api/admin/fuel/${p._id}?from=${j.from}&to=${j.to}`,{headers:{Authorization:`Bearer ${r.token}`}});I(a||[])}catch(t){console.error(t)}finally{N(!1)}}},pe=async()=>{if(p?._id)try{const t=localStorage.getItem("userInfo"),r=t?JSON.parse(t):null;if(!r?.token)return;const{data:a}=await f.get(`/api/admin/vehicles/${p._id}?usePagination=false&type=fleet`,{headers:{Authorization:`Bearer ${r.token}`}});z(a.vehicles||[])}catch(t){console.error(t)}},ce=async t=>{t.preventDefault(),J(!0);try{const r=localStorage.getItem("userInfo"),a=r?JSON.parse(r):null;if(!a?.token)return;W?(await f.put(`/api/admin/fuel/${W}`,{...i,companyId:p._id},{headers:{Authorization:`Bearer ${a.token}`}}),alert("Fuel entry updated successfully")):(await f.post("/api/admin/fuel",{...i,companyId:p._id},{headers:{Authorization:`Bearer ${a.token}`}}),alert("Fuel entry added successfully")),l(!1),_(),D()}catch(r){console.error(r),alert(r.response?.data?.message||"Error saving entry")}finally{J(!1)}},Q=t=>{Y(t._id),n({vehicleId:t.vehicle?._id||"",fuelType:t.fuelType||"Diesel",date:new Date(t.date).toISOString().split("T")[0],amount:t.amount||"",quantity:t.quantity||"",rate:t.rate||"",odometer:t.odometer||"",stationName:t.stationName||"",paymentMode:t.paymentMode||"Cash",paymentSource:t.paymentSource||"Yatree Office",driver:t.driver||"",slipPhoto:t.slipPhoto||""}),l(!0)},X=async t=>{const r=t.target.files[0];if(!r)return;const a=new FormData;a.append("file",r),a.append("upload_preset","yatreedestination");try{const o=localStorage.getItem("userInfo"),d=o?JSON.parse(o):null,u=await f.post("/api/admin/upload",a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${d?.token}`}});console.log("File successfully uploaded, URL:",u.data.url),n(be=>({...be,slipPhoto:u.data.url}))}catch(o){console.error("Upload failed:",o),alert("Image upload failed. Please try again.")}},xe=async t=>{if(!t)return;const r=new FormData;r.append("file",t),r.append("upload_preset","yatreedestination");try{const a=localStorage.getItem("userInfo"),o=a?JSON.parse(a):null,d=await f.post("/api/admin/upload",r,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${o?.token}`}});console.log("Camera capture uploaded, URL:",d.data.url),n(u=>({...u,slipPhoto:d.data.url}))}catch(a){console.error("Upload failed:",a),alert("Image upload failed. Please try again.")}},Z=async t=>{if(window.confirm("Are you sure you want to delete this entry?"))try{const r=localStorage.getItem("userInfo"),a=r?JSON.parse(r):null;if(!a?.token)return;await f.delete(`/api/admin/fuel/${t}`,{headers:{Authorization:`Bearer ${a.token}`}}),D()}catch(r){console.error(r)}},ge=t=>{oe(t),n({...i,amount:t.amount,odometer:t.km,date:new Date(t.date).toISOString().split("T")[0],driver:t.driver||"",fuelType:t.fuelType||"Diesel",quantity:t.quantity?t.quantity:"",rate:t.quantity&&t.amount?(t.amount/t.quantity).toFixed(2):"",slipPhoto:t.slipPhoto||""}),C(!0)},E=async(t,r,a,o={})=>{try{const d=localStorage.getItem("userInfo"),u=d?JSON.parse(d):null;if(!u?.token)return;await f.patch(`/api/admin/attendance/${t}/expense/${r}`,{status:a,...o},{headers:{Authorization:`Bearer ${u.token}`}}),G(),D(),C(!1),_()}catch(d){console.error("Fuel approve/reject error:",d);const u=d.response?.data?.message||d.message||"Error processing request";alert(`Error: ${u}`)}},_=()=>{Y(null),n({vehicleId:"",fuelType:"Diesel",date:new Date().toISOString().split("T")[0],amount:"",quantity:"",rate:"",odometer:"",stationName:"",paymentMode:"Cash",paymentSource:"Yatree Office",driver:"",slipPhoto:""})},he=()=>{const t=x.map(o=>({Date:new Date(o.date).toLocaleDateString("en-IN"),Vehicle:o.vehicle?.carNumber||"N/A","Fuel Type":o.fuelType,"Quantity (L)":o.quantity,"Rate (₹/L)":o.rate,"Amount (₹)":o.amount,"Odometer (KM)":o.odometer,"Distance (KM)":o.distance||0,"Mileage (KM/L)":o.mileage||0,"Payment Source":o.paymentSource||"Yatree Office","Payment Mode":o.paymentMode,Station:o.stationName||"N/A",Driver:o.driver||"N/A",Source:o.source||"Admin"})),r=$.json_to_sheet(t),a=$.book_new();$.book_append_sheet(a,r,"Fuel Logs"),Re(a,`Fuel_Report_${p?.name}_${new Date().toISOString().split("T")[0]}.xlsx`)};s.useEffect(()=>{if(i.amount&&i.quantity){const t=(Number(i.amount)/Number(i.quantity)).toFixed(2);i.rate!==t&&n(r=>({...r,rate:t}))}},[i.amount,i.quantity]);const x=v.filter(t=>{const r=t.vehicle?.carNumber?.toLowerCase()?.includes(R.toLowerCase())||t.stationName?.toLowerCase()?.includes(R.toLowerCase())||t.driver?.toLowerCase()?.includes(R.toLowerCase()),a=L==="All"||t.vehicle?._id===L;return r&&a}),ee=x.reduce((t,r)=>t+(r.distance||0),0),M=x.reduce((t,r,a)=>x.slice(0,a).some(d=>d.vehicle?._id===r.vehicle?._id)?t+(Number(r.quantity)||0):t,0),ue=x.reduce((t,r,a)=>x.slice(0,a).some(d=>d.vehicle?._id===r.vehicle?._id)?t+(Number(r.amount)||0):t,0),fe=M>0?(ee/M).toFixed(2):0,me=x.filter(t=>t.fuelType==="Petrol").reduce((t,r)=>t+(Number(r.amount)||0),0),ye=x.filter(t=>t.fuelType==="Diesel").reduce((t,r)=>t+(Number(r.amount)||0),0);return e.jsxs("div",{className:"container-fluid",style:{paddingBottom:"40px"},children:[e.jsx(We,{title:"Fuel Management",description:"Track fuel entries, mileage, and costs for your entire fleet."}),e.jsxs("header",{className:"flex-resp",style:{justifyContent:"space-between",padding:"40px 0",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"clamp(40px,10vw,50px)",height:"clamp(40px,10vw,50px)",background:"linear-gradient(135deg, white, #f8fafc)",borderRadius:"16px",padding:"8px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:e.jsx(P,{size:28,color:"#fbbf24"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#fbbf24",boxShadow:"0 0 8px #fbbf24"}}),e.jsx("span",{style:{fontSize:"clamp(9px,2.5vw,10px)",fontWeight:"800",color:"rgba(255,255,255,0.5)",letterSpacing:"1px",textTransform:"uppercase"},children:"Fuel Consumption"})]}),e.jsxs("h1",{style:{color:"white",fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"900",margin:0,letterSpacing:"-1px",cursor:"pointer"},children:["Fuel ",e.jsx("span",{className:"text-gradient-yellow",children:"Management"})]})]})]}),e.jsxs("div",{className:"flex-resp",style:{gap:"15px",flex:"1",justifyContent:"flex-end",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",flex:"1 1 auto",justifyContent:"flex-end"},children:[e.jsx("input",{type:"date",className:"input-field",style:{height:"52px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",width:"auto",minWidth:"130px",flex:"1 1 130px"},value:j.from,onChange:t=>V({...j,from:t.target.value})}),e.jsx("input",{type:"date",className:"input-field",style:{height:"52px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",width:"auto",minWidth:"130px",flex:"1 1 130px"},value:j.to,onChange:t=>V({...j,to:t.target.value})})]}),e.jsxs("div",{className:"glass-card",style:{padding:"0",display:"flex",alignItems:"center",maxWidth:"300px",width:"100%",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.08)",flex:"1 1 200px"},children:[e.jsx(je,{size:18,style:{margin:"0 15px",color:"rgba(255,255,255,0.4)",flexShrink:0}}),e.jsx("input",{type:"text",placeholder:"Search fuel...",value:R,onChange:t=>se(t.target.value),style:{background:"transparent",border:"none",color:"white",height:"50px",width:"100%",outline:"none",fontSize:"14px",minWidth:0}})]}),e.jsxs("button",{className:"btn-primary",onClick:he,style:{display:"flex",alignItems:"center",gap:"8px",height:"52px",padding:"0 20px",borderRadius:"14px",fontWeight:"800",background:"rgba(16, 185, 129, 0.15)",color:"#10b981",border:"1px solid rgba(16, 185, 129, 0.2)",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx(ve,{size:18})," ",e.jsx("span",{className:"hide-mobile",children:"Export Excel"}),e.jsx("span",{className:"show-mobile",children:"Excel"})]}),e.jsxs("button",{className:"btn-primary",onClick:()=>{_(),l(!0)},style:{display:"flex",alignItems:"center",gap:"10px",height:"52px",padding:"0 25px",borderRadius:"14px",fontWeight:"800",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx(O,{size:20})," ",e.jsx("span",{className:"hide-mobile",children:"Add Entry"}),e.jsx("span",{className:"show-mobile",children:"Add"})]})]})]}),T.length>0&&e.jsxs("div",{style:{marginBottom:"40px"},children:[e.jsxs("h3",{style:{color:"white",fontSize:"18px",fontWeight:"800",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#f43f5e",boxShadow:"0 0 10px #f43f5e"}}),"Driver Approvals (Awaiting)"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:T.map(t=>e.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card",style:{padding:"20px",borderLeft:"4px solid #f43f5e",background:"rgba(244, 63, 94, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.slipPhoto?e.jsx("img",{src:y(t.slipPhoto),onClick:()=>{w(t.slipPhoto),m(!0)},style:{width:"50px",height:"50px",borderRadius:"10px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"}}):e.jsx("div",{onClick:()=>{w(""),m(!0)},style:{width:"50px",height:"50px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:e.jsx(q,{size:20,color:"var(--text-muted)",style:{opacity:.5}})}),e.jsxs("div",{children:[e.jsxs("p",{style:{color:"white",fontWeight:"800",fontSize:"16px",margin:0},children:["₹",t.amount]}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"12px",margin:"4px 0 0"},children:[t.driver," • ",t.carNumber]})]})]}),e.jsx("span",{style:{background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",fontSize:"10px",padding:"4px 8px",borderRadius:"6px",fontWeight:"800",textTransform:"uppercase"},children:"Pending"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",color:"rgba(255,255,255,0.6)",marginBottom:"15px",background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"8px"},children:[e.jsxs("span",{children:[t.km," KM Reading"]}),e.jsx("span",{children:new Date(t.date).toLocaleDateString()})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[e.jsx("button",{onClick:()=>ge(t),style:{background:"#10b981",color:"white",border:"none",padding:"10px",borderRadius:"8px",fontWeight:"800",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:"6px"},children:"Review & Approve"}),e.jsx("button",{onClick:()=>E(t.attendanceId,t._id,"rejected"),style:{background:"rgba(255,255,255,0.05)",color:"#f43f5e",border:"1px solid rgba(244, 63, 94, 0.3)",padding:"10px",borderRadius:"8px",fontWeight:"800",cursor:"pointer"},children:"Reject"})]})]},t._id))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card",style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px",borderLeft:"4px solid #f59e0b"},children:[e.jsx("div",{style:{width:"54px",height:"54px",borderRadius:"16px",background:"rgba(245, 158, 11, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#f59e0b"},children:e.jsx(P,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Total Fuel Cost"}),e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0},children:["₹",ue.toLocaleString()]}),e.jsxs("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)"},children:["P: ₹",me.toLocaleString()," | D: ₹",ye.toLocaleString()]})]})]}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card",style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px",borderLeft:"4px solid #0ea5e9"},children:[e.jsx("div",{style:{width:"54px",height:"54px",borderRadius:"16px",background:"rgba(14, 165, 233, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#0ea5e9"},children:e.jsx(Se,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Total Liters"}),e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0},children:[M.toFixed(2)," L"]})]})]}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"glass-card",style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px",borderLeft:"4px solid #8b5cf6"},children:[e.jsx("div",{style:{width:"54px",height:"54px",borderRadius:"16px",background:"rgba(139, 92, 246, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#8b5cf6"},children:e.jsx(we,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Total Distance"}),e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0},children:[ee.toLocaleString()," KM"]}),e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)"},children:"Total run"})]})]}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-card",style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px",borderLeft:"4px solid #10b981"},children:[e.jsx("div",{style:{width:"54px",height:"54px",borderRadius:"16px",background:"rgba(16, 185, 129, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#10b981"},children:e.jsx(ke,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Avg. Mileage"}),e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0},children:[fe," KM/L"]}),e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)"},children:"Overall efficiency"})]})]}),e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-card",style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"54px",height:"54px",borderRadius:"16px",background:"rgba(255, 255, 255, 0.05)",display:"flex",justifyContent:"center",alignItems:"center",color:"rgba(255,255,255,0.6)"},children:e.jsx(ze,{size:24})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px"},children:"Vehicle Filter"}),e.jsxs("select",{className:"input-field",style:{background:"transparent",border:"none",color:"white",padding:0,height:"auto",fontWeight:"700"},value:L,onChange:t=>ne(t.target.value),children:[e.jsx("option",{value:"All",style:{background:"#1e293b"},children:"Filter Vehicles"}),b.map(t=>e.jsx("option",{value:t._id,style:{background:"#1e293b"},children:t.carNumber},t._id))]})]})]})]}),e.jsx("div",{className:"glass-card",style:{padding:"0",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:S?e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx("div",{className:"spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"20px"},children:"Loading fuel logs..."})]}):x.length===0?e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx(P,{size:48,style:{color:"rgba(255,255,255,0.1)",marginBottom:"20px"}}),e.jsx("h3",{style:{color:"white"},children:"No fuel records found"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Create your first fuel entry to start tracking."})]}):e.jsx("div",{className:"hide-mobile",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"left",background:"rgba(255,255,255,0.02)"},children:[e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Date & Vehicle"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Fuel Details"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Odometer & Trip"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Efficiency"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Payment Source"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Total Amount"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:x.map((t,r)=>e.jsxs(g.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:r*.05},style:{borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsx("div",{style:{color:"white",fontWeight:"800",fontSize:"14px"},children:new Date(t.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px"},children:[e.jsx(Ce,{size:12,style:{color:"#f59e0b"}}),e.jsx("span",{style:{fontSize:"13px",color:"rgba(255,255,255,0.6)",fontWeight:"700"},children:t.vehicle?.carNumber})]})]}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",borderRadius:"4px",background:t.fuelType==="Diesel"?"rgba(245, 158, 11, 0.1)":"rgba(14, 165, 233, 0.1)",color:t.fuelType==="Diesel"?"#f59e0b":"#0ea5e9",fontWeight:"800",textTransform:"uppercase"},children:t.fuelType}),e.jsxs("span",{style:{fontSize:"13px",color:"white",fontWeight:"600"},children:[t.quantity," L"]})]}),e.jsxs("div",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",marginTop:"4px"},children:["@ ₹",t.rate,"/L • ",t.stationName||"Local Station"]})]}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsxs("div",{style:{color:"white",fontWeight:"700",fontSize:"14px"},children:[t.odometer.toLocaleString()," KM"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px",color:"#10b981",marginTop:"4px",fontWeight:"600"},children:[e.jsx(Ie,{size:12}),t.distance||0," KM Driven"]})]}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsxs("div",{style:{color:t.mileage>12?"#10b981":"#f59e0b",fontWeight:"800",fontSize:"16px"},children:[t.mileage||0," ",e.jsx("span",{style:{fontSize:"10px"},children:"KM/L"})]}),e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:["₹",t.costPerKm||0,"/KM cost"]})]}),e.jsx("td",{style:{padding:"20px 25px"},children:e.jsx("div",{style:{color:"white",fontWeight:"700",fontSize:"14px"},children:t.paymentSource||"Yatree Office"})}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsxs("div",{style:{color:"white",fontWeight:"800",fontSize:"16px"},children:["₹",t.amount.toLocaleString()]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:[t.source==="Driver"?e.jsx(te,{size:10,color:"#0ea5e9"}):e.jsx(Te,{size:10,color:"#f59e0b"}),t.source==="Driver"?"Driver App":"Administrator"]}),e.jsxs("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.3)",marginTop:"2px"},children:["By: ",t.driver]})]}),e.jsx("td",{style:{padding:"20px 25px",textAlign:"right"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{w(t.slipPhoto||""),m(!0)},className:"glass-card-hover-effect",style:{width:"36px",height:"36px",borderRadius:"10px",background:t.slipPhoto?"rgba(16, 185, 129, 0.1)":"rgba(244, 63, 94, 0.05)",color:t.slipPhoto?"#10b981":"#f43f5e",border:"none",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",opacity:t.slipPhoto?1:.6},title:t.slipPhoto?"View Slip":"Slip Missing",children:e.jsx(q,{size:16,style:{opacity:t.slipPhoto?1:.5}})}),e.jsx("button",{onClick:()=>Q(t),className:"glass-card-hover-effect",style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(14, 165, 233, 0.1)",color:"#0ea5e9",border:"none",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(ie,{size:16})}),e.jsx("button",{onClick:()=>Z(t._id),className:"glass-card-hover-effect",style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",border:"none",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(re,{size:16})})]})})]},t._id))})]})})}),e.jsx("div",{className:"show-mobile",children:S?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:e.jsx("div",{className:"spinner"})}):x.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)",background:"rgba(255,255,255,0.02)",borderRadius:"16px"},children:[e.jsx(P,{size:40,style:{opacity:.2,marginBottom:"10px"}}),e.jsx("p",{children:"No fuel records found."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:x.map(t=>e.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card",style:{padding:"16px",background:"rgba(30, 41, 59, 0.4)",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"white",fontWeight:"900",fontSize:"18px",letterSpacing:"0.5px"},children:t.vehicle?.carNumber}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:"600"},children:new Date(t.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{color:"#f59e0b",fontWeight:"900",fontSize:"18px"},children:["₹",t.amount.toLocaleString()]}),e.jsxs("div",{style:{fontSize:"10px",color:"var(--text-muted)"},children:[t.quantity," L @ ₹",t.rate,"/L"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"12px",padding:"10px",background:"rgba(0,0,0,0.2)",borderRadius:"10px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800"},children:"Odometer"}),e.jsxs("div",{style:{color:"white",fontSize:"13px",fontWeight:"700"},children:[t.odometer.toLocaleString()," KM"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800"},children:"Efficiency"}),e.jsxs("div",{style:{color:t.mileage>12?"#10b981":"#f59e0b",fontSize:"13px",fontWeight:"700"},children:[t.mileage||0," KM/L"]})]})]}),e.jsx("div",{style:{marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",borderRadius:"4px",background:t.fuelType==="Diesel"?"rgba(245, 158, 11, 0.1)":"rgba(14, 165, 233, 0.1)",color:t.fuelType==="Diesel"?"#f59e0b":"#0ea5e9",fontWeight:"800",textTransform:"uppercase"},children:t.fuelType}),e.jsxs("span",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)"},children:["• ",t.stationName||"Local Station"]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"10px",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(te,{size:12,color:"white"})}),e.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.8)",fontWeight:"600"},children:t.driver})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>{w(t.slipPhoto||""),m(!0)},style:{background:t.slipPhoto?"rgba(16, 185, 129, 0.1)":"rgba(244, 63, 94, 0.05)",color:t.slipPhoto?"#10b981":"#f43f5e",padding:"8px",borderRadius:"8px",border:"1px solid rgba(16, 185, 129, 0.2)",opacity:t.slipPhoto?1:.6},children:e.jsx(q,{size:14,style:{opacity:t.slipPhoto?1:.5}})}),e.jsx("button",{onClick:()=>Q(t),style:{background:"rgba(14, 165, 233, 0.1)",color:"#0ea5e9",padding:"8px",borderRadius:"8px",border:"1px solid rgba(14, 165, 233, 0.2)"},children:e.jsx(ie,{size:14})}),e.jsx("button",{onClick:()=>Z(t._id),style:{background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",padding:"8px",borderRadius:"8px",border:"1px solid rgba(244, 63, 94, 0.2)"},children:e.jsx(re,{size:14})})]})]})]},t._id))})}),e.jsxs(ae,{children:[c&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(10px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},children:e.jsxs(g.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-card",style:{padding:"0",width:"100%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{padding:"25px",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"white",fontSize:"20px",fontWeight:"800",margin:0},children:W?"Edit Fuel Entry":"Add Fuel Entry"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"13px",margin:"4px 0 0"},children:"Log petrol/diesel refill and calculate mileage."})]}),e.jsx("button",{onClick:()=>l(!1),style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"8px",borderRadius:"50%",cursor:"pointer",border:"none"},children:e.jsx(k,{size:20})})]}),e.jsx("form",{onSubmit:ce,style:{padding:"clamp(20px, 5vw, 30px)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"25px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 250px), 1fr))",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Vehicle Number *"}),e.jsxs("select",{className:"input-field",value:i.vehicleId,required:!0,onChange:t=>n({...i,vehicleId:t.target.value}),style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",color:"white",padding:"0 15px"},children:[e.jsx("option",{value:"",style:{background:"#0f172a"},children:"-- Select Car --"}),b.map(t=>e.jsxs("option",{value:t._id,style:{background:"#0f172a"},children:[t.carNumber," (",t.model,")"]},t._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Fuel Type"}),e.jsx("div",{style:{display:"flex",gap:"8px",background:"rgba(255,255,255,0.02)",padding:"5px",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.05)",height:"50px"},children:["Diesel","Petrol","CNG"].map(t=>e.jsx("button",{type:"button",onClick:()=>n({...i,fuelType:t}),style:{flex:1,height:"100%",borderRadius:"10px",border:"none",background:i.fuelType===t?t==="Diesel"?"#f59e0b":"#0ea5e9":"transparent",color:i.fuelType===t?"black":"rgba(255,255,255,0.5)",fontWeight:"800",fontSize:"12px",cursor:"pointer",transition:"all 0.2s"},children:t},t))})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 180px), 1fr))",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Date *"}),e.jsx("input",{type:"date",className:"input-field",value:i.date,onChange:t=>n({...i,date:t.target.value}),required:!0,style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",color:"white",padding:"0 15px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Amount (₹) *"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"e.g. 5000",value:i.amount,onChange:t=>n({...i,amount:t.target.value}),required:!0,style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",color:"white",padding:"0 15px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Quantity (L) *"}),e.jsx("input",{type:"number",step:"0.01",className:"input-field",placeholder:"e.g. 50",value:i.quantity,onChange:t=>n({...i,quantity:t.target.value}),required:!0,style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",color:"white",padding:"0 15px"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 180px), 1fr))",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Rate (₹/L)"}),e.jsx("input",{type:"number",step:"0.01",className:"input-field",value:i.rate,onChange:t=>n({...i,rate:t.target.value}),placeholder:"Auto-calculated",style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.01)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"12px",color:"rgba(255,255,255,0.5)",padding:"0 15px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Odometer (KM) *"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"Current Reading",value:i.odometer,onChange:t=>n({...i,odometer:t.target.value}),required:!0,style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",color:"white",padding:"0 15px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Payment Source"}),e.jsxs("select",{className:"input-field",value:i.paymentSource,onChange:t=>n({...i,paymentSource:t.target.value}),style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",color:"white",padding:"0 15px"},children:[e.jsx("option",{value:"Yatree Office",style:{background:"#0f172a"},children:"Yatree Office (Default)"}),e.jsx("option",{value:"Guest / Client",style:{background:"#0f172a"},children:"Guest / Client"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 250px), 1fr))",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Fuel Station Name"}),e.jsx("input",{className:"input-field",placeholder:"e.g. HP Petrol Pump",value:i.stationName,onChange:t=>n({...i,stationName:t.target.value}),style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",color:"white",padding:"0 15px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Driver Name / ID *"}),e.jsx("input",{className:"input-field",placeholder:"Who fueled the car?",value:i.driver,onChange:t=>n({...i,driver:t.target.value}),required:!0,style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",color:"white",padding:"0 15px"}})]})]}),e.jsxs("div",{style:{padding:"20px",background:"rgba(255,255,255,0.02)",borderRadius:"16px",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"12px"},children:"Fuel Slip / Receipt Photo"}),e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[i.slipPhoto?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:y(i.slipPhoto),alt:"Slip",onClick:()=>{w(i.slipPhoto),m(!0)},style:{width:"80px",height:"80px",borderRadius:"12px",objectFit:"cover",border:"1px solid rgba(255,255,255,0.1)",cursor:"pointer"},title:"Click to view slip"}),e.jsx("button",{type:"button",onClick:()=>n({...i,slipPhoto:""}),style:{position:"absolute",top:"-8px",right:"-8px",background:"#f43f5e",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},children:e.jsx(k,{size:14})})]}):e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("div",{onClick:()=>F(!0),style:{width:"80px",height:"80px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx(A,{size:20,color:"var(--text-muted)"}),e.jsx("span",{style:{fontSize:"10px",color:"var(--text-muted)",marginTop:"4px"},children:"Camera"})]}),e.jsxs("label",{style:{width:"80px",height:"80px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx(O,{size:20,color:"var(--text-muted)"}),e.jsx("span",{style:{fontSize:"10px",color:"var(--text-muted)",marginTop:"4px"},children:"Upload"}),e.jsx("input",{type:"file",accept:"image/*",onChange:X,style:{display:"none"}})]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"12px",margin:0},children:"Snap a photo or upload fuel bill."}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"10px",marginTop:"4px"},children:"Max size: 5MB (JPG, PNG)"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 200px), 1fr))",gap:"15px",marginTop:"10px"},children:[e.jsx("button",{type:"submit",disabled:K,className:"btn-primary",style:{height:"56px",borderRadius:"14px",fontSize:"16px",fontWeight:"900",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",color:"black"},children:K?"Saving...":W?"Update Entry":"Save Fuel Entry"}),e.jsx("button",{type:"button",onClick:()=>l(!1),style:{height:"56px",background:"rgba(255,255,255,0.05)",color:"white",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"14px",fontWeight:"700",cursor:"pointer"},children:"Cancel"})]})]})})]})}),le&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(2, 6, 23, 0.95)",backdropFilter:"blur(20px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999,padding:"20px"},onClick:()=>m(!1),children:e.jsxs(g.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{position:"relative",maxWidth:"min(700px, 90vw)",width:"100%",display:"flex",justifyContent:"center"},onClick:t=>t.stopPropagation(),children:[H?e.jsx("img",{src:y(H),alt:"Fuel Slip",style:{width:"100%",height:"auto",maxHeight:"85vh",objectFit:"contain",borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"}}):e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"50px",borderRadius:"20px",textAlign:"center",width:"100%"},children:[e.jsx(A,{size:48,style:{opacity:.2,marginBottom:"15px"}}),e.jsx("p",{style:{color:"white",fontWeight:"700"},children:"No slip image available."}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"13px",marginTop:"10px"},children:"To fix this: Click the Edit (Pen) icon on the entry and upload the slip manually."})]}),e.jsx("button",{onClick:()=>m(!1),style:{position:"absolute",top:"-15px",right:"-15px",background:"#f43f5e",color:"white",border:"none",width:"36px",height:"36px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 5px 15px rgba(244, 63, 94, 0.4)",zIndex:100},children:e.jsx(k,{size:20})})]})})]}),e.jsx(ae,{children:U&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(10px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},children:e.jsxs(g.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-card",style:{padding:"0",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{padding:"25px",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"white",fontSize:"20px",fontWeight:"800",margin:0},children:"Review Fuel Entry"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"13px",margin:"4px 0 0"},children:"Verify details and slip before approving."})]}),e.jsx("button",{onClick:()=>C(!1),style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"8px",borderRadius:"50%",cursor:"pointer",border:"none"},children:e.jsx(k,{size:20})})]}),e.jsxs("div",{style:{padding:"30px"},children:[e.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"20px",background:"rgba(255,255,255,0.02)",padding:"15px",borderRadius:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800"},children:"Driver"}),e.jsx("div",{style:{color:"white",fontWeight:"700"},children:h?.driver})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800"},children:"Vehicle"}),e.jsx("div",{style:{color:"white",fontWeight:"700"},children:h?.carNumber})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800"},children:"Date"}),e.jsx("div",{style:{color:"white",fontWeight:"700"},children:new Date(h?.date).toLocaleDateString()})]})]}),e.jsxs("div",{className:"form-grid-2",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Amount (₹)"}),e.jsx("input",{type:"number",className:"input-field",value:i.amount,readOnly:!0,style:{opacity:.7}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Quantity (L)"}),e.jsx("input",{type:"number",step:"0.01",className:"input-field",value:i.quantity,onChange:t=>n({...i,quantity:t.target.value})})]})]}),e.jsxs("div",{className:"form-grid-2",style:{marginTop:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Rate (₹/L)"}),e.jsx("input",{type:"number",step:"0.01",className:"input-field",value:i.rate,onChange:t=>n({...i,rate:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Odometer"}),e.jsx("input",{type:"number",className:"input-field",value:i.odometer,onChange:t=>n({...i,odometer:t.target.value})})]})]}),e.jsxs("div",{style:{padding:"20px",background:"rgba(255,255,255,0.02)",borderRadius:"16px",border:"1px dashed rgba(255,255,255,0.1)",marginTop:"20px"},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"12px"},children:"Slip Image Verification"}),e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[i.slipPhoto?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:y(i.slipPhoto),alt:"Slip",onClick:()=>{w(i.slipPhoto),m(!0)},style:{width:"80px",height:"80px",borderRadius:"12px",objectFit:"cover",border:"1px solid rgba(255,255,255,0.1)",cursor:"pointer"},title:"Click to view slip"}),e.jsx("button",{type:"button",onClick:()=>n({...i,slipPhoto:""}),style:{position:"absolute",top:"-8px",right:"-8px",background:"#f43f5e",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},children:e.jsx(k,{size:14})})]}):e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("div",{onClick:()=>F(!0),style:{width:"80px",height:"80px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx(A,{size:20,color:"var(--text-muted)"}),e.jsx("span",{style:{fontSize:"10px",color:"var(--text-muted)",marginTop:"4px"},children:"Camera"})]}),e.jsxs("label",{style:{width:"80px",height:"80px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx(O,{size:20,color:"var(--text-muted)"}),e.jsx("span",{style:{fontSize:"10px",color:"var(--text-muted)",marginTop:"4px"},children:"Upload"}),e.jsx("input",{type:"file",accept:"image/*",onChange:X,style:{display:"none"}})]})]}),e.jsxs("div",{style:{flex:1},children:[!i.slipPhoto&&e.jsx("p",{style:{color:"#f59e0b",fontSize:"12px",margin:0,fontWeight:"700"},children:"⚠ No slip attached!"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"12px",margin:"4px 0 0"},children:"Upload the slip if it's missing or incorrect."})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",marginTop:"25px"},children:[e.jsx("button",{onClick:()=>E(h.attendanceId,h._id,"approved",{quantity:i.quantity,rate:i.rate,odometer:i.odometer,slipPhoto:i.slipPhoto}),style:{flex:2,height:"50px",borderRadius:"12px",fontSize:"15px",fontWeight:"800",background:"#10b981",color:"white",border:"none",cursor:"pointer"},children:"Confirm Approval"}),e.jsx("button",{onClick:()=>E(h.attendanceId,h._id,"rejected"),style:{flex:1,background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",border:"1px solid rgba(244, 63, 94, 0.2)",borderRadius:"12px",fontWeight:"800",cursor:"pointer"},children:"Reject"})]})]})]})})}),de&&e.jsx(De,{onCapture:xe,onClose:()=>F(!1)})]})};export{Fe as default};
