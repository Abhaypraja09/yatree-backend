import{b as l,j as e,W as h,O as se,ae as oe,Q as _,m as p,s as de,ab as pe,a8 as ce,M as xe,C as z,a3 as F,J as P,k as G}from"./vendor-TyV2iwV4.js";import{b as ge,i as u}from"./index-ygjJOEMI.js";import{u as T,w as he}from"./excel-LJBYwT0Y.js";import{S as ue}from"./SEO-vdZmlG6m.js";const je=()=>{const{selectedCompany:c}=ge(),[f,O]=l.useState([]),[V,$]=l.useState([]),[I,B]=l.useState(!0),[q,g]=l.useState(!1),[m,J]=l.useState(""),[j,Y]=l.useState("All"),[v,H]=l.useState(new Date().getMonth()+1),[S,U]=l.useState(new Date().getFullYear()),[w,Q]=l.useState("All"),[a,o]=l.useState({vehicleId:"",maintenanceType:"Regular Service",category:"",partsChanged:[],description:"",garageName:"",billNumber:"",billDate:new Date().toISOString().split("T")[0],amount:"",paymentMode:"Cash",currentKm:"",nextServiceKm:"",status:"Completed"}),[R,W]=l.useState(null),[A,D]=l.useState(!1),[d,y]=l.useState(!1),[b,C]=l.useState(null),M=["Regular Service","Engine & Mechanical","Tyres & Wheels","Brake System","Electrical & Battery","AC & Cooling","Body & Interior","Other"],X={"Regular Service":["Engine oil change","Oil filter","Air filter","Fuel filter","General servicing"],"Engine & Mechanical":["Clutch plate","Gearbox repair","Engine overhaul","Timing belt","Mountings"],"Tyres & Wheels":["New tyre purchase","Tyre rotation","Alignment & Balancing","Puncture repair"],"Brake System":["Brake pads","Brake shoe","Disc/Drum","Brake oil"],"Electrical & Battery":["Battery replacement","Alternator","Starter motor","Wiring","Lights"],"AC & Cooling":["AC gas refill","Compressor repair","Radiator service","Coolant top-up"],"Body & Interior":["Denting painting","Seat covers","Dashboard repair","Mirror/Glass","Wipers"]};l.useEffect(()=>{c&&(k(),Z())},[c,v,S]);const k=async()=>{if(c?._id){B(!0);try{const t=localStorage.getItem("userInfo"),i=t?JSON.parse(t):null;if(!i?.token)return;const{data:r}=await u.get(`/api/admin/maintenance/${c._id}?month=${v}&year=${S}`,{headers:{Authorization:`Bearer ${i.token}`}});O(r||[])}catch(t){console.error(t)}finally{B(!1)}}},Z=async()=>{if(c?._id)try{const t=localStorage.getItem("userInfo"),i=t?JSON.parse(t):null;if(!i?.token)return;const{data:r}=await u.get(`/api/admin/vehicles/${c._id}`,{headers:{Authorization:`Bearer ${i.token}`}});$(r.vehicles||[])}catch(t){console.error(t)}},ee=async t=>{t.preventDefault(),D(!0);try{const i=new FormData;Object.keys(a).forEach(s=>{s==="partsChanged"?i.append(s,JSON.stringify(a[s])):s==="nextServiceKm"&&(!d||!a[s])||i.append(s,a[s])}),i.append("companyId",c._id),R&&i.append("billPhoto",R);const r=localStorage.getItem("userInfo"),n=r?JSON.parse(r):null;if(!n?.token)return;b?(await u.put(`/api/admin/maintenance/${b}`,i,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n.token}`}}),alert("Maintenance record updated successfully")):(await u.post("/api/admin/maintenance",i,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n.token}`}}),alert("Maintenance record added successfully")),g(!1),y(!1),E(),k()}catch(i){console.error(i),alert(i.response?.data?.message||"Error saving record")}finally{D(!1)}},K=async t=>{if(window.confirm("Are you sure you want to delete this record?"))try{const i=localStorage.getItem("userInfo"),r=i?JSON.parse(i):null;if(!r?.token)return;await u.delete(`/api/admin/maintenance/${t}`,{headers:{Authorization:`Bearer ${r.token}`}}),k()}catch(i){console.error(i)}},E=()=>{o({vehicleId:"",maintenanceType:"",category:"",partsChanged:[],description:"",garageName:"",billNumber:"",billDate:new Date().toISOString().split("T")[0],amount:"",paymentMode:"Cash",currentKm:"",nextServiceKm:"",status:"Completed"}),W(null),y(!1),C(null)},L=t=>{o({vehicleId:t.vehicle?._id||"",maintenanceType:t.maintenanceType,category:t.category||"",partsChanged:t.partsChanged||[],description:t.description||"",garageName:t.garageName||"",billNumber:t.billNumber||"",billDate:t.billDate?t.billDate.split("T")[0]:"",amount:t.amount,paymentMode:t.paymentMode||"Cash",currentKm:t.currentKm||"",nextServiceKm:t.nextServiceKm||"",status:t.status||"Completed"}),C(t._id),t.nextServiceKm&&y(!0),g(!0)},te=()=>{const t=x.map(n=>({"Bill Date":n.billDate?new Date(n.billDate).toLocaleDateString("en-IN"):"N/A",Vehicle:n.vehicle?.carNumber||"N/A","Maintenance Type":n.maintenanceType,"Sub-Category":n.category||"N/A","Garage Name":n.garageName||n.vendorName||"N/A","Bill Number":n.billNumber||"N/A","Amount (₹)":n.amount||0,"KM Reading":n.currentKm||"N/A","Payment Mode":n.paymentMode,Description:n.description||"N/A","Next Service KM":n.nextServiceKm||"N/A"})),i=T.json_to_sheet(t),r=T.book_new();T.book_append_sheet(r,i,"Maintenance Logs"),he(r,`Maintenance_Report_${c?.name}_${new Date().toISOString().split("T")[0]}.xlsx`)},[N,ie]=l.useState("All"),ae=[...new Set(f.map(t=>t.garageName||t.vendorName).filter(Boolean))].sort(),re=[...new Set(f.map(t=>t.vehicle?.carNumber).filter(Boolean))].sort(),x=(f||[]).filter(t=>{const i=t.vehicle?.carNumber?.toLowerCase()?.includes(m.toLowerCase())||t.maintenanceType?.toLowerCase()?.includes(m.toLowerCase())||t.garageName?.toLowerCase()?.includes(m.toLowerCase()),r=j==="All"||t.maintenanceType&&t.maintenanceType.split(", ").includes(j),n=w==="All"||(t.garageName||t.vendorName)===w,s=N==="All"||t.vehicle?.carNumber===N;return i&&r&&n&&s}),ne=x.reduce((t,i)=>t+(Number(i.amount)||0),0);return e.jsxs("div",{className:"container-fluid",style:{paddingBottom:"40px"},children:[e.jsx(ue,{title:"Vehicle Maintenance",description:"Track and manage your fleet's maintenance schedules and repair histories."}),e.jsxs("header",{className:"mobile-stack",style:{display:"flex",justifyContent:"space-between",padding:"30px 0",gap:"20px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"clamp(46px, 10vw, 56px)",height:"clamp(46px, 10vw, 56px)",background:"linear-gradient(135deg, white, #f8fafc)",borderRadius:"16px",padding:"8px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",flexShrink:0},children:e.jsx(h,{size:26,color:"#fbbf24"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#fbbf24",boxShadow:"0 0 8px #fbbf24"}}),e.jsx("span",{style:{fontSize:"clamp(9px,2.5vw,10px)",fontWeight:"800",color:"rgba(255,255,255,0.5)",letterSpacing:"1px",textTransform:"uppercase"},children:"Fleet Health"})]}),e.jsxs("h1",{style:{color:"white",fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"900",margin:0,letterSpacing:"-1.5px"},children:["Vehicle ",e.jsx("span",{className:"text-gradient-yellow",children:"Maintenance"})]})]})]}),e.jsxs("div",{className:"mobile-stack",style:{display:"flex",gap:"12px",flex:"1",justifyContent:"flex-end",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",width:"100%",maxWidth:"100%"},children:[e.jsx("select",{value:v,onChange:t=>H(Number(t.target.value)),className:"input-field",style:{height:"48px",flex:1,borderRadius:"12px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",color:"white",padding:"0 12px",fontSize:"13px"},children:Array.from({length:12},(t,i)=>e.jsx("option",{value:i+1,style:{background:"#0f172a"},children:new Date(2e3,i).toLocaleString("default",{month:"short"})},i+1))}),e.jsx("select",{value:S,onChange:t=>U(Number(t.target.value)),className:"input-field",style:{height:"48px",width:"90px",borderRadius:"12px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",color:"white",padding:"0 12px",fontSize:"13px"},children:Array.from({length:5},(t,i)=>{const r=new Date().getFullYear()-2+i;return e.jsx("option",{value:r,style:{background:"#0f172a"},children:r},r)})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",width:"100%"},children:[e.jsxs("div",{className:"glass-card",style:{padding:"0",display:"flex",alignItems:"center",flex:1,borderRadius:"12px",border:"1px solid rgba(255,255,255,0.08)",background:"rgba(0,0,0,0.2)"},children:[e.jsx(se,{size:16,style:{margin:"0 12px",color:"rgba(255,255,255,0.3)"}}),e.jsx("input",{type:"text",placeholder:"Search records...",value:m,onChange:t=>J(t.target.value),style:{background:"transparent",border:"none",color:"white",height:"48px",width:"100%",outline:"none",fontSize:"13px"}})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:te,style:{width:"48px",height:"48px",borderRadius:"12px",background:"rgba(16, 185, 129, 0.1)",color:"#10b981",border:"1px solid rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},title:"Export Excel",children:e.jsx(oe,{size:18})}),e.jsx("button",{onClick:()=>{C(null),E(),g(!0)},style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #fbbf24 0%, #d97706 100%)",border:"none",color:"black",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 8px 15px rgba(251, 191, 36, 0.2)"},title:"Add Record",children:e.jsx(_,{size:20})})]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"30px"},children:[e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card",style:{padding:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"rgba(14, 165, 233, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#0ea5e9"},children:e.jsx(de,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"10px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Total Spend (Filtered)"}),e.jsxs("h2",{style:{color:"white",fontSize:"22px",fontWeight:"900",margin:0},children:["₹",ne.toLocaleString()]})]})]}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card",style:{padding:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"rgba(16, 185, 129, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#10b981"},children:e.jsx(pe,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"10px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Total Records"}),e.jsx("h2",{style:{color:"white",fontSize:"22px",fontWeight:"900",margin:0},children:x.length})]})]}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-card",style:{padding:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"rgba(245, 158, 11, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#f59e0b"},children:e.jsx(ce,{size:20})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"10px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Category Filter"}),e.jsxs("select",{value:j,onChange:t=>Y(t.target.value),style:{background:"transparent",border:"none",color:"white",fontWeight:"700",fontSize:"14px",width:"100%",outline:"none",cursor:"pointer",textOverflow:"ellipsis"},children:[e.jsx("option",{value:"All",style:{background:"#1e293b",color:"white"},children:"Filter Categories"}),M.map(t=>e.jsx("option",{value:t,style:{background:"#1e293b",color:"white"},children:t},t))]})]})]}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-card",style:{padding:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"rgba(139, 92, 246, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#8b5cf6"},children:e.jsx(xe,{size:20})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"10px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Garage Filter"}),e.jsxs("select",{value:w,onChange:t=>Q(t.target.value),style:{background:"transparent",border:"none",color:"white",fontWeight:"700",fontSize:"14px",width:"100%",outline:"none",cursor:"pointer",textOverflow:"ellipsis"},children:[e.jsx("option",{value:"All",style:{background:"#1e293b",color:"white"},children:"All Garages"}),ae.map(t=>e.jsx("option",{value:t,style:{background:"#1e293b",color:"white"},children:t},t))]})]})]}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"glass-card",style:{padding:"20px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"14px",background:"rgba(251, 191, 36, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#fbbf24"},children:e.jsx(z,{size:20})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"10px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Car Filter"}),e.jsxs("select",{value:N,onChange:t=>ie(t.target.value),style:{background:"transparent",border:"none",color:"white",fontWeight:"700",fontSize:"14px",width:"100%",outline:"none",cursor:"pointer",textOverflow:"ellipsis"},children:[e.jsx("option",{value:"All",style:{background:"#1e293b",color:"white"},children:"All Cars"}),re.map(t=>e.jsx("option",{value:t,style:{background:"#1e293b",color:"white"},children:t},t))]})]})]})]}),e.jsx("div",{className:"glass-card hide-mobile",style:{padding:"0",overflowX:"auto",border:"1px solid rgba(255,255,255,0.05)",background:"transparent"},children:I?e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx("div",{className:"spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"20px"},children:"Loading service history..."})]}):x.length===0?e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx(h,{size:48,style:{color:"rgba(255,255,255,0.1)",marginBottom:"20px"}}),e.jsx("h3",{style:{color:"white"},children:"No maintenance records found"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Start by adding a new service or repair record."})]}):e.jsxs("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"left",background:"rgba(255,255,255,0.02)"},children:[e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Date & Vehicle"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Service Details"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Garage / Vendor"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Cost & Pay"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:x.map((t,i)=>e.jsxs(p.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:i*.05},style:{borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsx("div",{style:{color:"white",fontWeight:"800",fontSize:"14px"},children:t.billDate?new Date(t.billDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px"},children:[e.jsx(z,{size:12,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"13px",color:"rgba(255,255,255,0.6)",fontWeight:"700"},children:t.vehicle?.carNumber||"N/A"})]})]}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:e.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",borderRadius:"4px",background:"rgba(99, 102, 241, 0.1)",color:"#818cf8",fontWeight:"800",textTransform:"uppercase"},children:t.maintenanceType})}),e.jsx("div",{style:{color:"white",fontSize:"13px",marginTop:"6px",fontWeight:"500"},children:t.category||"General Repair"}),t.currentKm&&e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:["At ",Number(t.currentKm).toLocaleString()," KM"]})]}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsx("div",{style:{color:"white",fontWeight:"700",fontSize:"14px"},children:t.garageName||t.vendorName||"Self/Local"}),e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:["Bill: ",t.billNumber||"N/A"]})]}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsxs("div",{style:{color:"#10b981",fontWeight:"800",fontSize:"16px"},children:["₹",Number(t.amount||0).toLocaleString()]}),e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:["via ",t.paymentMode]})]}),e.jsx("td",{style:{padding:"20px 25px",textAlign:"right"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[t.billPhoto&&e.jsx("button",{onClick:()=>window.open(t.billPhoto),className:"glass-card-hover-effect",style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(14, 165, 233, 0.1)",color:"#0ea5e9",border:"none",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},title:"View Bill",children:e.jsx(F,{size:16})}),e.jsx("button",{onClick:()=>L(t),className:"glass-card-hover-effect",style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(255, 255, 255, 0.1)",color:"white",border:"none",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},title:"Edit Entry",children:e.jsx(h,{size:16})}),e.jsx("button",{onClick:()=>K(t._id),className:"glass-card-hover-effect",style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",border:"none",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},title:"Delete Entry",children:e.jsx(P,{size:16})})]})})]},t._id||i))})]})}),e.jsx("div",{className:"show-mobile",children:e.jsx(G,{children:I?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center"},children:[e.jsx("div",{className:"spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"15px"},children:"Loading..."})]}):x.length===0?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",background:"rgba(255,255,255,0.02)",borderRadius:"16px"},children:[e.jsx(h,{size:32,style:{color:"rgba(255,255,255,0.1)",marginBottom:"15px"}}),e.jsx("h3",{style:{color:"white",fontSize:"16px"},children:"No records found"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:x.map((t,i)=>e.jsxs(p.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card",style:{padding:"16px",background:"rgba(30, 41, 59, 0.4)",borderRadius:"14px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px",borderBottom:"1px solid rgba(255,255,255,0.05)",paddingBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"white",fontWeight:"800",fontSize:"14px"},children:t.billDate?new Date(t.billDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px"},children:[e.jsx(z,{size:12,style:{color:"var(--primary)"}}),e.jsx("span",{style:{fontSize:"13px",color:"rgba(255,255,255,0.7)",fontWeight:"700"},children:t.vehicle?.carNumber||"N/A"})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{color:"#10b981",fontWeight:"800",fontSize:"16px"},children:["₹",Number(t.amount||0).toLocaleString()]}),e.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)"},children:t.paymentMode})]})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",borderRadius:"4px",background:"rgba(99, 102, 241, 0.1)",color:"#818cf8",fontWeight:"800",textTransform:"uppercase"},children:t.maintenanceType}),t.currentKm&&e.jsxs("span",{style:{fontSize:"10px",color:"var(--text-muted)",background:"rgba(255,255,255,0.05)",padding:"2px 6px",borderRadius:"4px"},children:[Number(t.currentKm).toLocaleString()," KM"]})]}),e.jsx("div",{style:{color:"white",fontSize:"14px",fontWeight:"600"},children:t.category||"General Repair"}),e.jsxs("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.5)",marginTop:"2px"},children:["Garage: ",e.jsx("span",{style:{color:"white"},children:t.garageName||t.vendorName||"Self"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[t.billPhoto&&e.jsxs("button",{onClick:()=>window.open(t.billPhoto),style:{flex:1,padding:"10px",borderRadius:"8px",background:"rgba(14, 165, 233, 0.1)",color:"#0ea5e9",border:"1px solid rgba(14, 165, 233, 0.2)",fontSize:"12px",fontWeight:"700",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:"6px"},children:[e.jsx(F,{size:14})," View Bill"]}),e.jsxs("button",{onClick:()=>L(t),style:{flex:1,padding:"10px",borderRadius:"8px",background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",fontSize:"12px",fontWeight:"700",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:"6px"},children:[e.jsx(h,{size:14})," Edit"]}),e.jsxs("button",{onClick:()=>K(t._id),style:{flex:1,padding:"10px",borderRadius:"8px",background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",border:"1px solid rgba(244, 63, 94, 0.2)",fontSize:"12px",fontWeight:"700",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:"6px"},children:[e.jsx(P,{size:14})," Delete"]})]})]},t._id||i))})})}),e.jsx(G,{children:q&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(10px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},children:e.jsxs(p.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-card",style:{padding:"0",width:"100%",maxWidth:"800px",maxHeight:"90vh",overflowY:"auto",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{padding:"25px",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"white",fontSize:"20px",fontWeight:"800",margin:0},children:b?"Edit Maintenance Record":"Add Maintenance Record"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"13px",margin:"4px 0 0"},children:"Log repairs, services, and part replacements."})]}),e.jsx("button",{onClick:()=>g(!1),style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"8px",borderRadius:"50%",cursor:"pointer",border:"none"},children:e.jsx(_,{size:20,style:{transform:"rotate(45deg)"}})})]}),e.jsx("form",{onSubmit:ee,style:{padding:"clamp(20px, 5vw, 30px)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"25px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"12px",display:"block"},children:"Maintenance Type (Multiple) *"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",background:"rgba(255,255,255,0.02)",padding:"15px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:M.map(t=>{const i=a.maintenanceType.split(", ").includes(t);return e.jsx("button",{type:"button",onClick:()=>{let r=a.maintenanceType?a.maintenanceType.split(", ").filter(Boolean):[];r.includes(t)?r=r.filter(n=>n!==t):r.push(t),o({...a,maintenanceType:r.join(", ")})},style:{padding:"8px 16px",borderRadius:"100px",fontSize:"12px",fontWeight:"700",border:i?"1px solid rgba(99, 102, 241, 0.4)":"1px solid transparent",background:i?"rgba(99, 102, 241, 0.15)":"rgba(255,255,255,0.05)",color:i?"#818cf8":"rgba(255,255,255,0.5)",cursor:"pointer",transition:"all 0.2s ease"},children:t},t)})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 250px), 1fr))",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px"},children:"Vehicle *"}),e.jsxs("select",{className:"input-field",value:a.vehicleId,onChange:t=>o({...a,vehicleId:t.target.value}),required:!0,style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",color:"white",padding:"0 15px"},children:[e.jsx("option",{value:"",style:{background:"#0f172a"},children:"Select Car"}),(V||[]).map(t=>e.jsxs("option",{value:t._id,style:{background:"#0f172a"},children:[t.carNumber," (",t.model,")"]},t._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px"},children:"Current KM Reading *"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"e.g. 45000",value:a.currentKm,onChange:t=>o({...a,currentKm:t.target.value}),required:!0,style:{width:"100%",height:"50px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px",color:"white",padding:"0 15px"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"12px",display:"block"},children:"Select Sub-Categories (Multiple)"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",background:"rgba(255,255,255,0.02)",padding:"15px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:(()=>{const t=a.maintenanceType.split(", ").filter(Boolean);return[...new Set(t.flatMap(r=>X[r]||[]))].map(r=>{const n=a.category.split(", ").includes(r);return e.jsx("button",{type:"button",onClick:()=>{let s=a.category?a.category.split(", ").filter(Boolean):[];s.includes(r)?s=s.filter(le=>le!==r):s.push(r),o({...a,category:s.join(", ")})},style:{padding:"8px 16px",borderRadius:"100px",fontSize:"12px",fontWeight:"700",border:n?"1px solid rgba(251, 191, 36, 0.3)":"1px solid transparent",background:n?"rgba(251, 191, 36, 0.2)":"rgba(255,255,255,0.05)",color:n?"#fbbf24":"rgba(255,255,255,0.4)",boxShadow:n?"0 0 15px rgba(251, 191, 36, 0.2)":"none",cursor:"pointer",transition:"all 0.2s ease"},children:r},r)})})()}),e.jsx("input",{type:"text",className:"input-field",style:{height:"40px",fontSize:"13px",background:"transparent",borderBottom:"1px solid rgba(255,255,255,0.1)",borderRadius:0,paddingLeft:0},placeholder:"Add custom or other items (comma separated)...",value:a.category,onChange:t=>o({...a,category:t.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Maintenance Description"}),e.jsx("textarea",{className:"input-field",style:{height:"80px",paddingTop:"12px",borderRadius:"12px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)"},placeholder:"Detailed notes about the work done...",value:a.description,onChange:t=>o({...a,description:t.target.value})})]}),e.jsxs("div",{style:{padding:"20px",background:"rgba(255,255,255,0.02)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("p",{style:{color:"var(--primary)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"20px"},children:"Workshop & Billing"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 200px), 1fr))",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Garage Name *"}),e.jsx("input",{required:!0,className:"input-field",style:{borderRadius:"10px"},placeholder:"e.g. Bosch Service",value:a.garageName,onChange:t=>o({...a,garageName:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Bill Number"}),e.jsx("input",{className:"input-field",style:{borderRadius:"10px"},placeholder:"INV-001",value:a.billNumber,onChange:t=>o({...a,billNumber:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Bill Date *"}),e.jsx("input",{required:!0,type:"date",className:"input-field",style:{borderRadius:"10px"},value:a.billDate,onChange:t=>o({...a,billDate:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Amount (₹) *"}),e.jsx("input",{required:!0,type:"number",className:"input-field",style:{borderRadius:"10px"},placeholder:"0.00",value:a.amount,onChange:t=>o({...a,amount:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Payment Mode"}),e.jsxs("select",{className:"input-field",style:{borderRadius:"10px"},value:a.paymentMode,onChange:t=>o({...a,paymentMode:t.target.value}),children:[e.jsx("option",{value:"Cash",style:{background:"#1e293b"},children:"Cash"}),e.jsx("option",{value:"UPI",style:{background:"#1e293b"},children:"UPI / GPay"}),e.jsx("option",{value:"Bank Transfer",style:{background:"#1e293b"},children:"Bank Transfer"}),e.jsx("option",{value:"Credit Card",style:{background:"#1e293b"},children:"Credit Card"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Bill Photo"}),e.jsx("input",{type:"file",onChange:t=>W(t.target.files[0]),style:{color:"rgba(255,255,255,0.4)",fontSize:"12px",width:"100%"}})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 300px), 1fr))",gap:"20px"},children:[e.jsxs("div",{style:{padding:"20px",background:d?"rgba(16, 185, 129, 0.05)":"rgba(255,255,255,0.02)",borderRadius:"16px",border:d?"1px solid rgba(16, 185, 129, 0.1)":"1px solid rgba(255,255,255,0.05)",transition:"all 0.3s ease"},children:[e.jsxs("div",{onClick:()=>y(!d),style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",marginBottom:d?"15px":"0"},children:[e.jsx("p",{style:{color:d?"#10b981":"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",margin:0},children:"Next Service Reminder"}),e.jsx("div",{style:{width:"40px",height:"20px",background:d?"#10b981":"rgba(255,255,255,0.1)",borderRadius:"20px",position:"relative",transition:"all 0.3s ease"},children:e.jsx("div",{style:{width:"16px",height:"16px",background:"white",borderRadius:"50%",position:"absolute",top:"2px",left:d?"22px":"2px",transition:"all 0.3s ease"}})})]}),d&&e.jsx(p.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},style:{display:"grid",gap:"15px"},children:e.jsx("input",{type:"number",className:"input-field",style:{borderRadius:"10px"},placeholder:"Next Service KM",value:a.nextServiceKm,onChange:t=>o({...a,nextServiceKm:t.target.value})})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("button",{type:"submit",disabled:A,className:"btn-primary",style:{height:"54px",borderRadius:"12px",fontSize:"15px",fontWeight:"900",background:"linear-gradient(135deg, #fbbf24 0%, #d97706 100%)",color:"black",border:"none"},children:A?"Saving...":b?"Update Record":"Save Record"}),e.jsx("button",{type:"button",onClick:()=>g(!1),style:{height:"44px",background:"rgba(255,255,255,0.05)",color:"white",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",fontWeight:"700",cursor:"pointer"},children:"Discard"})]})]})]})})]})})})]})};export{je as default};
