import{b as r,R as Y,j as e,V as R,m as a,e as G,t as de,x as C,p as V,I as pe,k as $,H as k,a0 as ce,w as xe,a5 as ge,_ as he,X as be,al as fe,am as ue}from"./vendor-TyV2iwV4.js";import{u as ye,i as h}from"./index-Dn_VlDjB.js";import{S as me}from"./SEO-CBYsYfvQ.js";const we=()=>{const{user:m,logout:Q}=ye(),[z,_]=r.useState(null),[S,q]=r.useState([]),[W,X]=r.useState([]),[K,J]=r.useState(!0),[T,E]=r.useState(!1),[d,Z]=r.useState("dashboard"),[c,ee]=r.useState(new Date),[n,L]=r.useState(null),[x,te]=r.useState([]),[g,ie]=r.useState(0),[re,j]=r.useState(!1),[b,f]=r.useState(null),[A,ne]=r.useState(null),s=Y.useRef(null),w=Y.useRef(null),[o,u]=r.useState({startDate:"",endDate:"",type:"Sick Leave",reason:""}),[D,N]=r.useState(!1);r.useEffect(()=>{(async()=>(await Promise.all([B(),U(),P(),O()]),J(!1)))();const i=setInterval(()=>ee(new Date),1e3);return()=>clearInterval(i)},[]);const O=async()=>{try{const{data:t}=await h.get("/api/staff/salary-cycles");te(t),t&&t.length>0&&L(t[g])}catch(t){console.error("Error fetching cycles:",t)}};r.useEffect(()=>{x&&x.length>g&&L(x[g])},[g,x]);const P=async()=>{try{const{data:t}=await h.get("/api/staff/leaves");X(t)}catch(t){console.error("Error fetching leaves:",t)}},ae=async t=>{t.preventDefault(),N(!0);try{await h.post("/api/staff/leave",o),alert("Leave request submitted successfully"),u({startDate:"",endDate:"",type:"Sick Leave",reason:""}),P()}catch(i){alert(i.response?.data?.message||"Error submitting leave")}finally{N(!1)}},B=async()=>{try{const{data:t}=await h.get("/api/staff/status");_(t.staff?t:null)}catch(t){console.error("Error fetching status:",t)}},U=async()=>{try{const{data:t}=await h.get("/api/staff/history");q(t)}catch(t){console.error("Error fetching history:",t)}},F=async t=>{ne(t),j(!0),f(null);try{const i=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});s.current&&(s.current.srcObject=i)}catch(i){console.error("Camera error:",i),alert("Could not access camera. Please ensure permissions are granted."),j(!1)}},H=()=>{s.current&&s.current.srcObject&&(s.current.srcObject.getTracks().forEach(i=>i.stop()),s.current.srcObject=null)},se=()=>{if(s.current&&w.current){const t=s.current,i=w.current;i.width=t.videoWidth,i.height=t.videoHeight,i.getContext("2d").drawImage(t,0,0,i.width,i.height);const l=i.toDataURL("image/jpeg",.8);f(l),H(),oe(l)}},oe=async(t=b)=>{if(!t){alert("Please capture a photo first.");return}const i=A;E(!0);try{if(!navigator.geolocation){alert("Geolocation is not supported by your browser or device.");return}const p=await new Promise((I,v)=>{navigator.geolocation.getCurrentPosition(I,v,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:l,longitude:y}=p.coords;let M=`Coordinates: ${l.toFixed(6)}, ${y.toFixed(6)}`;try{const v=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${l}&lon=${y}&zoom=18`)).json();v.display_name&&(M=v.display_name)}catch{}const le=i==="in"?"/api/staff/punch-in":"/api/staff/punch-out";await h.post(le,{latitude:l,longitude:y,address:M,photo:t}),j(!1),f(null),B(),U(),O()}catch(p){alert(p.response?.data?.message||"Error processing punch."),f(null)}finally{E(!1)}};return K?e.jsx("div",{style:{minHeight:"100vh",background:"#020617",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("div",{className:"spinner",style:{width:"40px",height:"40px"}})}):e.jsxs("div",{style:{minHeight:"100vh",background:"#020617",color:"white",paddingBottom:"100px",fontFamily:"'Inter', sans-serif"},children:[e.jsx(me,{title:"Staff Portal | Dashboard"}),e.jsx("div",{style:{background:"linear-gradient(to bottom, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.4))",padding:"40px 20px",marginBottom:"30px",borderBottom:"1px solid rgba(255,255,255,0.05)",backdropFilter:"blur(20px)"},children:e.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[e.jsxs("div",{style:{width:"64px",height:"64px",borderRadius:"22px",background:"linear-gradient(135deg, #0ea5e9, #6366f1)",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 15px 30px rgba(14, 165, 233, 0.4)",position:"relative",overflow:"hidden"},children:[e.jsx(R,{size:32,color:"white"}),e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(rgba(255,255,255,0.2), transparent)",pointerEvents:"none"}})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"10px",fontWeight:"900",color:"#fbbf24",letterSpacing:"2px",textTransform:"uppercase"},children:"Active Personnel"}),e.jsx("h2",{style:{fontSize:"24px",fontWeight:"900",margin:"2px 0",letterSpacing:"-0.8px"},children:m?.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("p",{style:{fontSize:"12px",color:"#10b981",fontWeight:"800",margin:0},children:m?.designation||"Staff Member"}),e.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"rgba(255,255,255,0.2)"}}),e.jsxs("p",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",fontWeight:"700",margin:0},children:["ID: ",m?.username]})]})]})]}),e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Q,style:{background:"rgba(244, 63, 94, 0.12)",border:"1px solid rgba(244, 63, 94, 0.2)",color:"#f43f5e",width:"44px",height:"44px",borderRadius:"14px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:e.jsx(G,{size:20})})]})}),e.jsxs("main",{style:{maxWidth:"600px",margin:"0 auto",padding:"0 20px"},children:[e.jsx("div",{style:{background:"rgba(15, 23, 42, 0.4)",padding:"8px",borderRadius:"24px",display:"flex",gap:"8px",marginBottom:"35px",border:"1px solid rgba(255,255,255,0.06)",backdropFilter:"blur(10px)",overflowX:"auto",scrollbarWidth:"none",position:"sticky",top:"20px",zIndex:100},children:[{id:"dashboard",label:"HUB",icon:de},{id:"attendance",label:"LOGS",icon:C},{id:"leaves",label:"SOS",icon:V},{id:"salary",label:"PAY",icon:pe}].map(t=>e.jsxs("button",{onClick:()=>Z(t.id),style:{flex:1,minWidth:"80px",padding:"14px 10px",borderRadius:"18px",border:"none",background:d===t.id?"linear-gradient(135deg, #0ea5e9, #6366f1)":"transparent",color:d===t.id?"white":"rgba(255,255,255,0.4)",fontWeight:"900",fontSize:"11px",letterSpacing:"1px",cursor:"pointer",transition:"0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:d===t.id?"0 10px 20px -5px rgba(99, 102, 241, 0.4)":"none"},children:[e.jsx(t.icon,{size:16}),t.label]},t.id))}),e.jsxs($,{mode:"wait",children:[d==="dashboard"&&e.jsxs(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},children:[e.jsxs("div",{style:{marginBottom:"35px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"12px",color:"#0ea5e9",fontWeight:"900",textTransform:"uppercase",letterSpacing:"2px"},children:c.getHours()<12?"MORNING PROTOCOL":c.getHours()<17?"AFTERNOON SHIFT":"EVENING ROTATION"}),e.jsxs("h1",{style:{margin:"8px 0 0 0",fontSize:"36px",color:"white",fontWeight:"950",letterSpacing:"-1.5px"},children:["Hi, ",m?.name.split(" ")[0]]})]}),e.jsxs("div",{style:{textAlign:"right",background:"rgba(255,255,255,0.03)",padding:"10px 18px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("p",{style:{margin:0,fontSize:"14px",color:"white",fontWeight:"900"},children:c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx("p",{style:{margin:"2px 0 0 0",fontSize:"10px",color:"rgba(255,255,255,0.4)",fontWeight:"800"},children:c.toLocaleDateString("en-IN",{weekday:"short",day:"numeric",month:"short"}).toUpperCase()})]})]}),e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.6)",padding:"40px 20px",borderRadius:"40px",textAlign:"center",border:"1px solid rgba(255,255,255,0.08)",backdropFilter:"blur(30px)",marginBottom:"30px",position:"relative",overflow:"hidden",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle at center, rgba(14, 165, 233, 0.08) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("h1",{style:{fontSize:"72px",fontWeight:"950",margin:0,letterSpacing:"-4px",color:"white",display:"flex",justifyContent:"center",alignItems:"flex-start",gap:"8px"},children:[c.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!1}),e.jsxs("span",{style:{fontSize:"20px",color:"rgba(255,255,255,0.2)",marginTop:"16px",letterSpacing:"0"},children:[":",c.toLocaleTimeString("en-IN",{second:"2-digit"})]})]}),e.jsx("p",{style:{fontSize:"12px",color:"rgba(255,255,255,0.4)",fontWeight:"900",letterSpacing:"3px",marginTop:"10px"},children:"STANDARD TIME SEQUENCE"}),e.jsx("div",{style:{marginTop:"40px",display:"flex",justifyContent:"center"},children:z?z.punchOut?.time?e.jsx("div",{style:{background:"rgba(16, 185, 129, 0.05)",padding:"30px",borderRadius:"30px",border:"1px solid rgba(16, 185, 129, 0.2)",width:"100%"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px"},children:[e.jsx("div",{style:{background:"#10b981",width:"40px",height:"40px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 0 20px rgba(16, 185, 129, 0.5)"},children:e.jsx(ce,{size:24,color:"white"})}),e.jsx("h3",{style:{margin:0,color:"white",fontSize:"22px",fontWeight:"950",letterSpacing:"-0.5px"},children:"Shift Completed"})]})}):e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>F("out"),style:{width:"100%",maxWidth:"300px",height:"80px",borderRadius:"40px",background:"linear-gradient(135deg, #f43f5e, #e11d48)",border:"none",color:"white",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:"15px",boxShadow:"0 15px 30px rgba(244, 63, 94, 0.4)"},children:[e.jsx(G,{size:24}),e.jsx("span",{style:{fontWeight:"950",fontSize:"22px",letterSpacing:"1px"},children:"QUICK PUNCH OUT"})]}):e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>F("in"),style:{width:"100%",maxWidth:"300px",height:"80px",borderRadius:"40px",background:"linear-gradient(135deg, #0ea5e9, #6366f1)",border:"none",color:"white",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:"15px",boxShadow:"0 15px 30px rgba(14, 165, 233, 0.4)"},children:[e.jsx(k,{size:24}),e.jsx("span",{style:{fontWeight:"950",fontSize:"22px",letterSpacing:"1px"},children:"QUICK PUNCH IN"})]})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"16px"},children:[e.jsxs("div",{style:{background:"linear-gradient(145deg, rgba(30, 41, 59, 0.6), rgba(15, 23, 42, 0.6))",padding:"28px",borderRadius:"35px",border:"1px solid rgba(255,255,255,0.08)",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",boxShadow:"0 0 10px #10b981"}}),e.jsx("p",{style:{fontSize:"10px",fontWeight:"900",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",margin:0,letterSpacing:"1.5px"},children:"ACCUMULATED PAY"})]}),e.jsxs("h2",{style:{fontSize:"40px",fontWeight:"950",margin:0,color:"white",letterSpacing:"-2px"},children:["Rs. ",n?.finalSalary?.toLocaleString()||"0"]})]}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.03)",padding:"28px",borderRadius:"35px",border:"1px solid rgba(255,255,255,0.06)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[e.jsx("span",{style:{fontSize:"36px",color:"white",fontWeight:"950",lineHeight:1,letterSpacing:"-1px"},children:n?.presentDays||0}),e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",fontWeight:"900",marginTop:"6px",letterSpacing:"1px"},children:"PRESENCE"})]})]})]},"dashboard"),d==="attendance"&&e.jsxs(a.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"25px"},children:[e.jsxs("h3",{style:{fontSize:"20px",fontWeight:"950",display:"flex",alignItems:"center",gap:"12px",margin:0,letterSpacing:"-0.5px"},children:[e.jsx(C,{size:22,color:"#0ea5e9"})," ACTIVITY VAULT"]}),e.jsxs("span",{style:{fontSize:"11px",color:"rgba(255,255,255,0.3)",fontWeight:"800"},children:[S.length," RECORDS FOUND"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"18px"},children:S.length===0?e.jsxs("div",{style:{padding:"100px 20px",textAlign:"center",background:"rgba(15, 23, 42, 0.4)",borderRadius:"40px",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"rgba(255,255,255,0.03)",display:"flex",justifyContent:"center",alignItems:"center",margin:"0 auto 25px"},children:e.jsx(C,{size:40,style:{opacity:.1}})}),e.jsx("h4",{style:{color:"white",margin:"0 0 8px 0",fontWeight:"900"},children:"Awaiting Signals"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.3)",fontWeight:"700",fontSize:"13px"},children:"Your activity logs will materialize here."})]}):S.map((t,i)=>e.jsxs(a.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:i*.05},whileHover:{y:-5,background:"rgba(30, 41, 59, 0.7)",borderColor:"rgba(14, 165, 233, 0.3)"},style:{background:"rgba(15, 23, 42, 0.5)",padding:"24px",borderRadius:"32px",border:"1px solid rgba(255,255,255,0.06)",transition:"0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"18px",fontWeight:"950",color:"white",letterSpacing:"-0.5px"},children:new Date(t.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",weekday:"short"})}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"6px"},children:[e.jsx("span",{style:{fontSize:"9px",fontWeight:"900",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"4px 10px",borderRadius:"8px",textTransform:"uppercase"},children:t.status==="present"?"FULL DAY":t.status}),t.punchIn?.location?.address==="Admin Added"&&e.jsx("span",{style:{fontSize:"9px",fontWeight:"900",color:"#fbbf24",background:"rgba(251, 191, 36, 0.1)",padding:"4px 10px",borderRadius:"8px",textTransform:"uppercase"},children:"OVERRIDE"})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{margin:0,fontSize:"10px",fontWeight:"900",color:"rgba(255,255,255,0.3)",textTransform:"uppercase"},children:"DURATION"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"18px",fontWeight:"950",color:"#0ea5e9"},children:t.punchIn?.time&&t.punchOut?.time?(()=>{const p=new Date(t.punchOut.time)-new Date(t.punchIn.time),l=Math.floor(p/(1e3*60*60)),y=Math.floor(p%(1e3*60*60)/(1e3*60));return`${l}h ${y}m`})():"--"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.25)",padding:"18px",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"},children:[e.jsx("div",{style:{width:"22px",height:"22px",borderRadius:"7px",background:"rgba(16, 185, 129, 0.2)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(xe,{size:14,color:"#10b981"})}),e.jsx("span",{style:{fontSize:"10px",fontWeight:"900",color:"rgba(255,255,255,0.4)",letterSpacing:"1px"},children:"ARRIVAL"})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[e.jsx("div",{style:{position:"relative"},children:t.punchIn?.photo?e.jsx("img",{src:t.punchIn.photo,style:{width:"56px",height:"56px",borderRadius:"16px",objectFit:"cover",border:"1px solid rgba(255,255,255,0.1)"},alt:"Punch In"}):e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"rgba(255,255,255,0.03)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(R,{size:20,style:{opacity:.1}})})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"950",color:"white"},children:t.punchIn?.time?new Date(t.punchIn.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"}),e.jsx("div",{style:{fontSize:"9px",color:"rgba(255,255,255,0.3)",fontWeight:"800",marginTop:"3px",maxWidth:"120px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.punchIn?.location?.address||"Verified Hub"})]})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.25)",padding:"18px",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"15px"},children:[e.jsx("div",{style:{width:"22px",height:"22px",borderRadius:"7px",background:"rgba(244, 63, 94, 0.2)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(ge,{size:14,color:"#f43f5e"})}),e.jsx("span",{style:{fontSize:"10px",fontWeight:"900",color:"rgba(255,255,255,0.4)",letterSpacing:"1px"},children:"DEPARTURE"})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[e.jsx("div",{style:{position:"relative"},children:t.punchOut?.photo?e.jsx("img",{src:t.punchOut.photo,style:{width:"56px",height:"56px",borderRadius:"16px",objectFit:"cover",border:"1px solid rgba(255,255,255,0.1)"},alt:"Punch Out"}):e.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"16px",background:"rgba(255,255,255,0.03)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(R,{size:20,style:{opacity:.1}})})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"950",color:"white"},children:t.punchOut?.time?new Date(t.punchOut.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"}),e.jsx("div",{style:{fontSize:"9px",color:"rgba(255,255,255,0.3)",fontWeight:"800",marginTop:"3px",maxWidth:"120px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.punchOut?.location?.address||"Verified Link"})]})]})]})]})]},t._id))})]},"attendance"),d==="leaves"&&e.jsxs(a.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{style:{background:"rgba(244, 63, 94, 0.08)",border:"1px solid rgba(244, 63, 94, 0.2)",padding:"25px",borderRadius:"32px",marginBottom:"35px",display:"flex",gap:"20px",alignItems:"center"},children:[e.jsx("div",{style:{background:"#f43f5e",width:"44px",height:"44px",borderRadius:"14px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 0 20px rgba(244, 63, 94, 0.4)"},children:e.jsx(he,{size:24,color:"white"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"15px",fontWeight:"950",color:"white"},children:"Leave Allowance"}),e.jsx("p",{style:{margin:0,fontSize:"12px",color:"rgba(255,255,255,0.5)",fontWeight:"700",lineHeight:"1.4"},children:"Standard monthly allowance resets each cycle. Unapproved leaves will be deducted from daily accrual rate."})]})]}),e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.6)",padding:"35px",borderRadius:"40px",border:"1px solid rgba(255,255,255,0.08)",marginBottom:"35px"},children:[e.jsxs("h3",{style:{fontSize:"20px",fontWeight:"950",marginBottom:"30px",display:"flex",alignItems:"center",gap:"12px",letterSpacing:"-0.5px"},children:[e.jsx(V,{size:22,color:"#fbbf24"})," FILE LEAVE REQUEST"]}),e.jsxs("form",{onSubmit:ae,style:{display:"flex",flexDirection:"column",gap:"25px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"18px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",fontWeight:"900",textTransform:"uppercase",marginBottom:"12px",display:"block",letterSpacing:"2px"},children:"DEPARTURE"}),e.jsx("input",{type:"date",required:!0,className:"input-field",value:o.startDate,onChange:t=>u({...o,startDate:t.target.value}),style:{height:"56px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",color:"white"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",fontWeight:"900",textTransform:"uppercase",marginBottom:"12px",display:"block",letterSpacing:"2px"},children:"RETURN"}),e.jsx("input",{type:"date",required:!0,className:"input-field",value:o.endDate,onChange:t=>u({...o,endDate:t.target.value}),style:{height:"56px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",color:"white"}})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",fontWeight:"900",textTransform:"uppercase",marginBottom:"12px",display:"block",letterSpacing:"2px"},children:"REASONING CATEGORY"}),e.jsxs("select",{className:"input-field",value:o.type,onChange:t=>u({...o,type:t.target.value}),style:{height:"56px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",color:"white"},children:[e.jsx("option",{value:"Sick Leave",children:"Sick Leave / Medical"}),e.jsx("option",{value:"Casual Leave",children:"Casual Leave"}),e.jsx("option",{value:"Personal",children:"Personal Emergency"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",fontWeight:"900",textTransform:"uppercase",marginBottom:"12px",display:"block",letterSpacing:"2px"},children:"REASON (OPTIONAL DETAILS)"}),e.jsx("textarea",{className:"input-field",rows:"3",value:o.reason,onChange:t=>u({...o,reason:t.target.value}),style:{height:"auto",paddingTop:"18px",resize:"none",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",color:"white"},placeholder:"Provide necessary context..."})]}),e.jsx("button",{type:"submit",disabled:D,style:{height:"64px",background:"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"none",borderRadius:"20px",color:"#000",fontWeight:"950",fontSize:"16px",letterSpacing:"1px",cursor:"pointer",boxShadow:"0 20px 40px -10px rgba(251, 191, 36, 0.4)",marginTop:"10px"},children:D?"TRANSMITTING...":"SUBMIT REQUEST"})]})]}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:"950",marginBottom:"20px",letterSpacing:"-0.5px"},children:"SIGNAL HISTORY"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:W.length===0?e.jsx("div",{style:{padding:"60px",textAlign:"center",background:"rgba(255,255,255,0.02)",borderRadius:"32px",border:"1px dashed rgba(255,255,255,0.05)"},children:e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.2)",fontWeight:"800"},children:"NO PREVIOUS SIGNALS DETECTED"})}):W.map(t=>e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.4)",padding:"24px",borderRadius:"32px",border:"1px solid rgba(255,255,255,0.06)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"11px",fontWeight:"900",color:"#fbbf24",textTransform:"uppercase",letterSpacing:"1px"},children:t.type}),e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"15px",fontWeight:"900",color:"white"},children:[new Date(t.startDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})," â€” ",new Date(t.endDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})]})]}),e.jsx("div",{style:{padding:"8px 16px",borderRadius:"12px",fontSize:"10px",fontWeight:"950",letterSpacing:"1px",background:t.status==="Approved"?"rgba(16, 185, 129, 0.1)":t.status==="Rejected"?"rgba(244, 63, 94, 0.1)":"rgba(251, 191, 36, 0.1)",color:t.status==="Approved"?"#10b981":t.status==="Rejected"?"#f43f5e":"#fbbf24",border:`1px solid ${t.status==="Approved"?"rgba(16, 185, 129, 0.2)":t.status==="Rejected"?"rgba(244, 63, 94, 0.2)":"rgba(251, 191, 36, 0.2)"}`},children:t.status.toUpperCase()})]},t._id))})]},"leaves"),d==="salary"&&e.jsxs(a.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[x.length>0&&e.jsxs("div",{style:{marginBottom:"25px"},children:[e.jsx("label",{style:{fontSize:"10px",fontWeight:"900",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",marginBottom:"10px",display:"block",letterSpacing:"2px"},children:"FINANCIAL CYCLE"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("select",{className:"premium-input",style:{height:"56px",background:"rgba(15, 23, 42, 0.8)",border:"1px solid rgba(255,255,255,0.1)",color:"white",borderRadius:"18px",fontWeight:"800",fontSize:"15px",padding:"0 20px",appearance:"none",width:"100%"},value:g,onChange:t=>ie(parseInt(t.target.value)),children:x.map((t,i)=>e.jsxs("option",{value:i,children:[t.cycleLabel," ",i===0?"[ ACTIVE CYCLE ]":""]},i))}),e.jsx("div",{style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"},children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.4)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #0f172a 0%, #020617 100%)",padding:"45px 30px",borderRadius:"40px",border:"1px solid rgba(255,255,255,0.08)",textAlign:"center",marginBottom:"30px",position:"relative",overflow:"hidden",boxShadow:"0 20px 40px -20px rgba(0,0,0,0.5)"},children:[e.jsx("div",{style:{position:"absolute",top:"-30%",right:"-20%",width:"100%",height:"100%",background:"radial-gradient(circle, rgba(16, 185, 129, 0.15) 0%, transparent 60%)",filter:"blur(50px)"}}),e.jsx("div",{style:{position:"absolute",bottom:"-30%",left:"-20%",width:"100%",height:"100%",background:"radial-gradient(circle, rgba(14, 165, 233, 0.1) 0%, transparent 60%)",filter:"blur(50px)"}}),e.jsx("p",{style:{fontSize:"10px",fontWeight:"950",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",letterSpacing:"3px",marginBottom:"15px",position:"relative",zIndex:2},children:g===0?"PROJECTED ACCRUAL":"TOTAL CYCLE EARNINGS"}),e.jsxs("h1",{style:{fontSize:"64px",fontWeight:"950",color:"white",margin:"0 0 10px 0",letterSpacing:"-2px",textShadow:"0 0 40px rgba(16, 185, 129, 0.4)",position:"relative",zIndex:2},children:[e.jsx("span",{style:{fontSize:"32px",color:"#10b981",verticalAlign:"top",marginRight:"4px"},children:"Rs. "}),n?.finalSalary?.toLocaleString()||"0"]}),e.jsx("div",{style:{display:"inline-block",background:"rgba(255,255,255,0.05)",padding:"6px 16px",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.05)",position:"relative",zIndex:2},children:e.jsx("p",{style:{fontSize:"11px",color:"#0ea5e9",margin:0,fontWeight:"900",letterSpacing:"1px"},children:n?.cycleLabel||""})})]}),e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:"32px",border:"1px solid rgba(255,255,255,0.06)",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"24px 30px",background:"rgba(255,255,255,0.02)",borderBottom:"1px solid rgba(255,255,255,0.04)"},children:e.jsx("h4",{style:{margin:0,fontSize:"14px",fontWeight:"950",letterSpacing:"1px",color:"white"},children:"PAYROLL TELEMETRY"})}),e.jsxs("div",{style:{padding:"30px",display:"flex",flexDirection:"column",gap:"22px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"rgba(255,255,255,0.2)"}}),e.jsx("span",{style:{fontSize:"14px",color:"rgba(255,255,255,0.5)",fontWeight:"800"},children:"Base Parameter (Monthly)"})]}),e.jsxs("span",{style:{fontWeight:"950",fontSize:"16px",color:"white"},children:["Rs. ",n?.salary?.toLocaleString()||"0"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"rgba(255,255,255,0.2)"}}),e.jsx("span",{style:{fontSize:"14px",color:"rgba(255,255,255,0.5)",fontWeight:"800"},children:"Per Day Rate"})]}),e.jsxs("span",{style:{fontWeight:"950",fontSize:"16px",color:"white"},children:["Rs. ",n?.salary?Math.round(n?.salary/30).toLocaleString():"0"," / Day"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#0ea5e9"}}),e.jsx("span",{style:{fontSize:"14px",color:"rgba(255,255,255,0.5)",fontWeight:"800"},children:"Active Presence"})]}),e.jsxs("span",{style:{fontWeight:"950",fontSize:"16px",color:"#0ea5e9"},children:[n?.presentDays||0," Units"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#f43f5e",boxShadow:"0 0 10px rgba(244,63,94,0.5)"}}),e.jsx("span",{style:{fontSize:"14px",color:"rgba(255,255,255,0.5)",fontWeight:"800"},children:"Buffer Protocol Breach"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("span",{style:{fontWeight:"950",fontSize:"16px",color:"#f43f5e",display:"block"},children:["-Rs. ",n?.deduction?.toLocaleString()||"0"]}),n?.extraLeaves>0&&e.jsxs("span",{style:{fontSize:"10px",color:"rgba(244,63,94,0.6)",fontWeight:"800",letterSpacing:"1px"},children:["(",n.extraLeaves," Overage)"]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",boxShadow:"0 0 10px rgba(16,185,129,0.5)"}}),e.jsx("span",{style:{fontSize:"14px",color:"rgba(255,255,255,0.5)",fontWeight:"800"},children:"Weekend Multiplier"})]}),e.jsxs("span",{style:{fontWeight:"950",fontSize:"16px",color:"#10b981"},children:["+Rs. ",n?.sundayBonus?.toLocaleString()||"0"]})]}),e.jsx("div",{style:{width:"100%",height:"1px",background:"rgba(255,255,255,0.06)",margin:"5px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(255,255,255,0.02)",padding:"20px",borderRadius:"20px",border:"1px solid rgba(255,255,255,0.03)"},children:[e.jsx("span",{style:{fontWeight:"950",fontSize:"14px",letterSpacing:"1px",color:"rgba(255,255,255,0.8)"},children:"NET YIELD"}),e.jsxs("span",{style:{fontWeight:"950",fontSize:"24px",color:"#10b981"},children:["Rs. ",n?.finalSalary?.toLocaleString()||"0"]})]})]})]})]},"salary")]})]}),e.jsx($,{children:re&&e.jsxs(a.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(30px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(2, 6, 23, 0.95)",zIndex:9999,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"25px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(to bottom, rgba(0,0,0,0.8), transparent)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(14, 165, 233, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid rgba(14, 165, 233, 0.3)",boxShadow:"0 0 20px rgba(14, 165, 233, 0.4)"},children:e.jsx(k,{size:20,color:"#0ea5e9"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"950",margin:0,letterSpacing:"1px",color:"white"},children:"BIOMETRIC SCAN"}),e.jsx("p",{style:{margin:0,fontSize:"10px",color:"#0ea5e9",fontWeight:"800",letterSpacing:"2px",textTransform:"uppercase"},children:A==="in"?"Arrival Protocol":"Departure Protocol"})]})]}),e.jsx("button",{onClick:()=>{H(),j(!1)},style:{background:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",color:"#f43f5e",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",width:"44px",height:"44px",borderRadius:"50%",transition:"0.3s"},children:e.jsx(be,{size:24})})]}),e.jsx("div",{style:{flex:1,position:"relative",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",padding:"20px"},children:e.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"350px",aspectRatio:"1/1",borderRadius:"50%",overflow:"hidden",border:"5px solid rgba(14, 165, 233, 0.3)",boxShadow:"0 0 60px rgba(14, 165, 233, 0.4)"},children:[b?e.jsx("img",{src:b,style:{width:"100%",height:"100%",objectFit:"cover"},alt:"Captured Identity"}):e.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}}),e.jsx("canvas",{ref:w,style:{display:"none"}}),!b&&e.jsx(a.div,{animate:{y:[0,450,0]},transition:{duration:3.5,repeat:1/0,ease:"linear"},style:{position:"absolute",top:"0",left:"0",right:"0",height:"100px",background:"linear-gradient(to bottom, transparent, rgba(14, 165, 233, 0.4), transparent)",borderBottom:"2px solid #0ea5e9",zIndex:5,pointerEvents:"none"}}),b&&e.jsxs("div",{style:{position:"absolute",inset:0,background:"rgba(16, 185, 129, 0.2)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:15},children:[e.jsx("div",{style:{background:"#10b981",borderRadius:"50%",padding:"10px",boxShadow:"0 0 30px #10b981",marginBottom:"10px"},children:e.jsx(fe,{size:30,color:"white"})}),e.jsx("span",{style:{fontWeight:"950",fontSize:"18px",color:"white",letterSpacing:"2px",textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:"IDENTITY LOGGED"})]})]})}),e.jsx("div",{style:{padding:"20px",background:"linear-gradient(to top, #020617 80%, transparent)",display:"flex",justifyContent:"center",gap:"20px"},children:e.jsxs("div",{style:{display:"flex",gap:"15px",width:"100%",maxWidth:"400px"},children:[e.jsx("button",{onClick:()=>f(null),style:{flex:1,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",color:"white",height:"64px",borderRadius:"30px",fontWeight:"950",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",fontSize:"14px",letterSpacing:"1px"},children:e.jsx(ue,{size:20})}),e.jsx("button",{onClick:se,disabled:T,style:{flex:2,background:"linear-gradient(135deg, #0ea5e9, #6366f1)",border:"none",color:"white",height:"64px",borderRadius:"30px",fontWeight:"950",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",fontSize:"16px",letterSpacing:"1px",boxShadow:"0 15px 30px rgba(99, 102, 241, 0.5)"},children:T?"UPLOADING...":e.jsxs(e.Fragment,{children:[e.jsx(k,{size:24})," SECURE BIOMETRICS"]})})]})})]})}),e.jsx("style",{children:`
                .spinner {
                    border: 3px solid rgba(14, 165, 233, 0.1);
                    border-radius: 50%;
                    border-top: 3px solid #0ea5e9;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                .input-field {
                    width: 100%;
                    padding: 0 16px;
                    border-radius: 16px;
                    font-size: 14px;
                    font-weight: 500;
                    margin-bottom: 20px;
                    transition: 0.3s;
                    box-sizing: border-box;
                }
                .input-field:focus {
                    border-color: #0ea5e9 !important;
                    outline: none;
                }
                ::-webkit-scrollbar { display: none; }
            `})]})};export{we as default};
