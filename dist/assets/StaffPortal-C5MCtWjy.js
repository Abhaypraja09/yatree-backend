import{b as a,R as G,j as e,l as k,m as r,X,e as q,v as T,x as z,q as Z,I as K,H as E,a0 as Q,M as ue,a1 as be,B as fe,_ as ye,aj as me,ak as je}from"./vendor-CAwo-Int.js";import{u as ve,i as u}from"./index-CrERKttY.js";import{S as Se}from"./SEO-DjjsI1g5.js";const Re=()=>{const{user:p,logout:J}=ve(),[W,ee]=a.useState(null),[w,te]=a.useState([]),[D,ie]=a.useState([]),[re,ae]=a.useState(!0),[A,L]=a.useState(!1),[s,ne]=a.useState("dashboard"),[b,se]=a.useState(new Date),[n,O]=a.useState(null),[x,oe]=a.useState([]),[g,le]=a.useState(0),[de,j]=a.useState(!1),[h,f]=a.useState(null),[N,pe]=a.useState(null),[P,v]=a.useState(null),o=G.useRef(null),I=G.useRef(null),[l,y]=a.useState({startDate:"",endDate:"",type:"Sick Leave",reason:""}),[B,F]=a.useState(!1);a.useEffect(()=>{(async()=>(await Promise.all([U(),$(),H(),M()]),ae(!1)))();const i=setInterval(()=>se(new Date),1e3);return()=>clearInterval(i)},[]);const M=async()=>{try{const{data:t}=await u.get("/api/staff/salary-cycles");oe(t),t&&t.length>0&&O(t[g])}catch(t){console.error("Error fetching cycles:",t)}};a.useEffect(()=>{x&&x.length>g&&O(x[g])},[g,x]);const H=async()=>{try{const{data:t}=await u.get("/api/staff/leaves");ie(t)}catch(t){console.error("Error fetching leaves:",t)}},ce=async t=>{t.preventDefault(),F(!0);try{await u.post("/api/staff/leave",l),alert("Leave request submitted successfully"),y({startDate:"",endDate:"",type:"Sick Leave",reason:""}),H()}catch(i){alert(i.response?.data?.message||"Error submitting leave")}finally{F(!1)}},U=async()=>{try{const{data:t}=await u.get("/api/staff/status");ee(t.staff?t:null)}catch(t){console.error("Error fetching status:",t)}},$=async()=>{try{const{data:t}=await u.get("/api/staff/history");te(t)}catch(t){console.error("Error fetching history:",t)}},Y=async t=>{pe(t),j(!0),f(null);try{const i=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});o.current&&(o.current.srcObject=i)}catch(i){console.error("Camera error:",i),alert("Could not access camera. Please ensure permissions are granted."),j(!1)}},V=()=>{o.current&&o.current.srcObject&&(o.current.srcObject.getTracks().forEach(i=>i.stop()),o.current.srcObject=null)},xe=()=>{if(o.current&&I.current){const t=o.current,i=I.current;i.width=t.videoWidth,i.height=t.videoHeight,i.getContext("2d").drawImage(t,0,0,i.width,i.height);const d=i.toDataURL("image/jpeg",.8);f(d),V(),ge(d)}},ge=async(t=h)=>{if(!t){alert("Please capture a photo first.");return}const i=N;L(!0);try{if(!navigator.geolocation){alert("Geolocation is not supported by your browser or device.");return}const c=await new Promise((R,S)=>{navigator.geolocation.getCurrentPosition(R,S,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:d,longitude:m}=c.coords;let _=`Coordinates: ${d.toFixed(6)}, ${m.toFixed(6)}`;try{const S=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${d}&lon=${m}&zoom=18`)).json();S.display_name&&(_=S.display_name)}catch{}const he=i==="in"?"/api/staff/punch-in":"/api/staff/punch-out";await u.post(he,{latitude:d,longitude:m,address:_,photo:t}),j(!1),f(null),U(),$(),M()}catch(c){alert(c.response?.data?.message||"Error processing punch."),f(null)}finally{L(!1)}};if(re)return e.jsx("div",{style:{minHeight:"100vh",background:"#020617",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("div",{className:"spinner",style:{width:"40px",height:"40px"}})});const C={dashboard:"#0ea5e9",attendance:"#6366f1",leaves:"#fbbf24",salary:"#10b981"};return e.jsxs("div",{style:{minHeight:"100vh",background:"#0B1121",color:"white",fontFamily:"'Outfit', sans-serif",position:"relative",overflowX:"hidden",paddingBottom:"120px"},children:[e.jsx(Se,{title:"WORKFORCE COMMAND | BIOMETRIC PORTAL",description:"High-fidelity biometric identity and payroll orchestration portal."}),e.jsx("div",{style:{position:"fixed",top:"-10%",right:"-5%",width:"40%",height:"40%",background:`radial-gradient(circle, ${C[s]}15 0%, transparent 70%)`,filter:"blur(80px)",pointerEvents:"none",transition:"background 0.8s ease",zIndex:0}}),e.jsx("div",{style:{position:"fixed",bottom:"-10%",left:"-5%",width:"40%",height:"40%",background:`radial-gradient(circle, ${C[s]}10 0%, transparent 70%)`,filter:"blur(80px)",pointerEvents:"none",transition:"background 0.8s ease",zIndex:0}}),e.jsx("div",{style:{position:"fixed",top:"20%",left:"10%",width:"200px",height:"200px",background:`${C[s]}05`,filter:"blur(100px)",borderRadius:"50%",pointerEvents:"none",transition:"background 0.8s ease",zIndex:0}}),e.jsx(k,{children:P&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(5, 8, 15, 0.98)",zIndex:11e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"15px",backdropFilter:"blur(30px)"},onClick:()=>v(null),children:e.jsxs(r.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},style:{position:"relative",width:"100%",maxWidth:"500px"},onClick:t=>t.stopPropagation(),children:[e.jsx("img",{src:P,style:{width:"100%",borderRadius:"32px",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 40px 80px rgba(0,0,0,0.6)"},alt:"Sign-in Shot"}),e.jsx("button",{onClick:()=>v(null),style:{position:"absolute",top:"15px",right:"15px",background:"white",color:"black",border:"none",width:"36px",height:"36px",borderRadius:"12px",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold"},children:e.jsx(X,{size:20})})]})})}),e.jsxs("div",{style:{padding:"24px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:100,background:"rgba(11, 17, 33, 0.8)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"15px",background:"linear-gradient(135deg, #0ea5e9, #6366f1)",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"900",border:"2px solid rgba(255,255,255,0.1)",overflow:"hidden"},children:p?.profilePhoto?e.jsx("img",{src:p.profilePhoto,style:{width:"100%",height:"100%",objectFit:"cover"}}):p?.name?.charAt(0)}),e.jsx("div",{style:{position:"absolute",bottom:"-2px",right:"-2px",width:"12px",height:"12px",background:"#10b981",borderRadius:"50%",border:"2px solid #0B1121"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"800",margin:0,letterSpacing:"-0.5px"},children:p?.name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"2px"},children:[e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",fontWeight:"700",textTransform:"uppercase",letterSpacing:"1px"},children:p?.designation||"Staff"}),e.jsx("div",{style:{width:"3px",height:"3px",borderRadius:"50%",background:"rgba(255,255,255,0.2)"}}),e.jsxs("span",{style:{fontSize:"10px",color:"#0ea5e9",fontWeight:"900"},children:["#",p?._id.slice(-4).toUpperCase()]})]})]})]})}),e.jsx("div",{style:{display:"flex",gap:"10px"},children:e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:J,style:{background:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.2)",color:"#f43f5e",padding:"0 16px",height:"44px",borderRadius:"14px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontWeight:"800",fontSize:"12px"},children:[e.jsx(q,{size:18}),"EXIT"]})})]}),e.jsxs("main",{style:{maxWidth:"1200px",margin:"30px auto 40px",padding:"0 16px"},children:[e.jsx("div",{style:{background:"rgba(15, 23, 42, 0.6)",padding:"8px",borderRadius:"24px",display:"flex",gap:"8px",marginBottom:"30px",border:"1px solid rgba(255,255,255,0.08)",backdropFilter:"blur(30px)",overflowX:"auto",scrollbarWidth:"none",position:"sticky",top:"90px",zIndex:90,boxShadow:"0 10px 30px rgba(0,0,0,0.3)"},children:[{id:"dashboard",label:"HUB",icon:T,color:"#0ea5e9"},{id:"attendance",label:"LOGS",icon:z,color:"#6366f1"},{id:"leaves",label:"LEAVES",icon:Z,color:"#fbbf24"},{id:"salary",label:"PAY",icon:K,color:"#10b981"}].map(t=>e.jsxs("button",{onClick:()=>ne(t.id),style:{flex:1,minWidth:"90px",padding:"14px 10px",borderRadius:"18px",border:"none",background:s===t.id?`${t.color}20`:"transparent",color:s===t.id?t.color:"rgba(255,255,255,0.4)",fontWeight:s===t.id?"950":"700",fontSize:"11px",letterSpacing:"1px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",whiteSpace:"nowrap"},children:[e.jsx(t.icon,{size:16}),e.jsx("span",{children:t.label})]},t.id))}),e.jsxs(k,{mode:"wait",children:[s==="dashboard"&&e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxs("div",{className:"resp-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px"},children:[e.jsxs("div",{style:{gridColumn:"1 / -1",marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#0ea5e9",boxShadow:"0 0 10px #0ea5e9"}}),e.jsx("span",{style:{fontSize:"10px",fontWeight:"900",color:"#0ea5e9",textTransform:"uppercase",letterSpacing:"2px"},children:b.getHours()<12?"Morning Protocol":b.getHours()<17?"Afternoon Shift":"Evening Rotation"})]}),e.jsxs("h1",{style:{fontSize:"clamp(28px, 6vw, 40px)",fontWeight:"950",color:"white",margin:0,letterSpacing:"-1.5px"},children:["Welcome, ",p?.name.split(" ")[0]]})]}),e.jsxs(r.div,{style:{gridColumn:"span 2",background:"rgba(15, 23, 42, 0.4)",padding:"clamp(40px, 10vw, 80px) 20px",borderRadius:"45px",textAlign:"center",border:"1px solid rgba(255,255,255,0.06)",backdropFilter:"blur(40px)",position:"relative",overflow:"hidden",boxShadow:"0 40px 100px -20px rgba(0,0,0,0.7), inset 0 0 1px 1px rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"420px"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle at center, rgba(14, 165, 233, 0.12) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",top:"20px",left:"20px",fontSize:"10px",color:"rgba(255,255,255,0.2)",fontWeight:"900",letterSpacing:"2px",mixBlendMode:"overlay"},children:"BIOMETRIC_PORTAL_V2.0"}),e.jsxs("div",{style:{position:"relative",zIndex:2},children:[e.jsxs("div",{style:{fontSize:"clamp(72px, 18vw, 120px)",fontWeight:"1000",margin:0,letterSpacing:"-6px",color:"white",display:"flex",justifyContent:"center",alignItems:"baseline",gap:"6px",lineHeight:.9,textShadow:"0 0 40px rgba(14, 165, 233, 0.3)"},children:[b.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!1}),e.jsxs(r.span,{animate:{opacity:[1,.3,1]},transition:{duration:1.5,repeat:1/0},style:{fontSize:"clamp(24px, 5vw, 40px)",color:"rgba(14, 165, 233, 0.5)",fontWeight:"600",letterSpacing:"0"},children:[":",b.toLocaleTimeString("en-IN",{second:"2-digit"})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginTop:"15px"},children:e.jsx("div",{style:{background:"rgba(255,255,255,0.05)",padding:"6px 16px",borderRadius:"100px",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx("span",{style:{fontSize:"11px",color:"white",fontWeight:"900",textTransform:"uppercase",letterSpacing:"2px"},children:b.toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"}).toUpperCase()})})}),e.jsx("div",{style:{marginTop:"60px",display:"flex",justifyContent:"center"},children:W?.attendance?W.attendance?.punchOut?.time?e.jsxs(r.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},style:{background:"rgba(16, 185, 129, 0.1)",padding:"30px 50px",borderRadius:"32px",border:"1px solid rgba(16, 185, 129, 0.25)",display:"inline-flex",flexDirection:"column",alignItems:"center",gap:"12px",boxShadow:"inset 0 0 30px rgba(16, 185, 129, 0.1)"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#10b981",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 0 20px #10b981"},children:e.jsx(Q,{size:28,color:"white"})}),e.jsx("span",{style:{color:"#10b981",fontSize:"18px",fontWeight:"1000",letterSpacing:"1px"},children:"SHIFT SECURED"})]}):e.jsxs(r.button,{whileHover:{scale:1.05,y:-4,boxShadow:"0 25px 50px -12px rgba(244, 63, 94, 0.6)"},whileTap:{scale:.95},onClick:()=>Y("out"),style:{width:"100%",maxWidth:"350px",height:"80px",borderRadius:"28px",background:"linear-gradient(135deg, #f43f5e, #e11d48)",border:"none",color:"white",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",boxShadow:"0 20px 40px -10px rgba(244, 63, 94, 0.4)",fontSize:"20px",fontWeight:"1000",letterSpacing:"1px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"14px",background:"rgba(255,255,255,0.15)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(q,{size:24})}),"TERMINATE DEPLOY"]}):e.jsxs(r.button,{whileHover:{scale:1.05,y:-4,boxShadow:"0 25px 50px -12px rgba(14, 165, 233, 0.6)"},whileTap:{scale:.95},onClick:()=>Y("in"),style:{width:"100%",maxWidth:"350px",height:"80px",borderRadius:"28px",background:"linear-gradient(135deg, #0ea5e9, #6366f1)",border:"none",color:"white",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",boxShadow:"0 20px 40px -10px rgba(14, 165, 233, 0.4)",fontSize:"20px",fontWeight:"1000",letterSpacing:"1px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"14px",background:"rgba(255,255,255,0.15)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(E,{size:24})}),"INITIATE ARRIVAL"]})})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs(r.div,{whileHover:{transform:"translateY(-5px)"},style:{background:"rgba(16, 185, 129, 0.05)",padding:"28px",borderRadius:"35px",border:"1px solid rgba(16, 185, 129, 0.12)",backdropFilter:"blur(30px)",flex:1,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"80px",height:"80px",background:"rgba(16, 185, 129, 0.1)",filter:"blur(30px)",borderRadius:"50%"}}),e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(16, 185, 129, 0.15)",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px"},children:e.jsx(K,{size:20,color:"#10b981"})}),e.jsx("p",{style:{margin:0,fontSize:"11px",color:"rgba(255,255,255,0.4)",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1.5px"},children:"Accrued Yield"}),e.jsxs("h2",{style:{fontSize:"36px",margin:"4px 0",fontWeight:"950",color:"white",letterSpacing:"-1px"},children:["₹",n?.finalSalary?.toLocaleString()||"0"]}),e.jsxs("p",{style:{margin:"10px 0 0 0",fontSize:"11px",color:"#10b981",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:[n?.presentDays||0," COMPLETED CYCLES"]})]}),e.jsxs(r.div,{whileHover:{transform:"translateY(-5px)"},style:{background:"rgba(99, 102, 241, 0.05)",padding:"28px",borderRadius:"35px",border:"1px solid rgba(99, 102, 241, 0.12)",backdropFilter:"blur(30px)",flex:1,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"80px",height:"80px",background:"rgba(99, 102, 241, 0.1)",filter:"blur(30px)",borderRadius:"50%"}}),e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(99, 102, 241, 0.15)",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px"},children:e.jsx(T,{size:20,color:"#6366f1"})}),e.jsx("p",{style:{margin:0,fontSize:"11px",color:"rgba(255,255,255,0.4)",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1.5px"},children:"Efficiency Index"}),e.jsxs("h2",{style:{fontSize:"36px",margin:"4px 0",fontWeight:"950",color:"white",letterSpacing:"-1px"},children:[Math.round((n?.presentDays||0)/26*100),"%"]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"rgba(255,255,255,0.05)",borderRadius:"10px",marginTop:"15px",overflow:"hidden"},children:e.jsx(r.div,{initial:{width:0},animate:{width:`${(n?.presentDays||0)/26*100}%`},transition:{duration:1.5,ease:"easeOut"},style:{height:"100%",background:"linear-gradient(90deg, #6366f1, #0ea5e9)"}})})]})]})]})},"dashboard"),s==="attendance"&&e.jsxs(r.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},style:{gridColumn:"span 12"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"25px"},children:[e.jsxs("h3",{style:{fontSize:"20px",fontWeight:"950",display:"flex",alignItems:"center",gap:"12px",margin:0,letterSpacing:"-0.5px"},children:[e.jsx(z,{size:22,color:"#0ea5e9"})," ACTIVITY VAULT"]}),e.jsxs("span",{style:{fontSize:"11px",color:"rgba(255,255,255,0.3)",fontWeight:"800"},children:[w.length," RECORDS FOUND"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:w.length===0?e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"100px 20px",textAlign:"center",background:"rgba(15, 23, 42, 0.4)",borderRadius:"40px",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx(z,{size:48,style:{opacity:.1,marginBottom:"20px"}}),e.jsx("h4",{style:{color:"white",margin:"0 0 8px 0",fontWeight:"950",fontSize:"18px"},children:"No Activity Signals"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.3)",fontWeight:"700",fontSize:"14px"},children:"Deployment logs will appear in this secure vault."})]}):w.map((t,i)=>e.jsxs(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:i*.05},whileHover:{y:-5,borderColor:"rgba(14, 165, 233, 0.3)"},style:{background:"rgba(15, 23, 42, 0.5)",padding:"24px",borderRadius:"32px",border:"1px solid rgba(255,255,255,0.06)",display:"flex",flexDirection:"column",gap:"20px",transition:"0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"default",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"100px",height:"100px",background:"radial-gradient(circle, rgba(14, 165, 233, 0.05) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1.5px",marginBottom:"4px"},children:new Date(t.date).toLocaleDateString("en-IN",{weekday:"long"})}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"950",color:"white",letterSpacing:"-0.5px"},children:new Date(t.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsx("div",{style:{fontSize:"9px",fontWeight:"950",color:"#10b981",background:"rgba(16, 185, 129, 0.1)",padding:"5px 12px",borderRadius:"10px",textTransform:"uppercase",letterSpacing:"1px"},children:t.status==="present"?"NORMALIZED":t.status})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.25)",padding:"16px",borderRadius:"22px",border:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"9px",fontWeight:"950",color:"rgba(255,255,255,0.3)",letterSpacing:"1px"},children:"ARRIVAL"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.punchIn?.photo?e.jsx(r.img,{whileHover:{scale:1.1},src:t.punchIn.photo,style:{width:"44px",height:"44px",borderRadius:"12px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},onClick:()=>v(t.punchIn.photo)}):e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"rgba(255,255,255,0.02)",border:"1px dashed rgba(255,255,255,0.1)"}}),e.jsx("div",{children:e.jsx("div",{style:{fontSize:"15px",fontWeight:"950",color:"white"},children:t.punchIn?.time?new Date(t.punchIn.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"})})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.25)",padding:"16px",borderRadius:"22px",border:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"9px",fontWeight:"950",color:"rgba(255,255,255,0.3)",letterSpacing:"1px"},children:"DEPARTURE"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.punchOut?.photo?e.jsx(r.img,{whileHover:{scale:1.1},src:t.punchOut.photo,style:{width:"44px",height:"44px",borderRadius:"12px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},onClick:()=>v(t.punchOut.photo)}):e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"rgba(255,255,255,0.02)",border:"1px dashed rgba(255,255,255,0.1)"}}),e.jsx("div",{children:e.jsx("div",{style:{fontSize:"15px",fontWeight:"950",color:"white"},children:t.punchOut?.time?new Date(t.punchOut.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"})})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"10px",borderTop:"1px solid rgba(255,255,255,0.03)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(ue,{size:10,color:"#0ea5e9"}),e.jsx("span",{style:{fontSize:"9px",color:"rgba(255,255,255,0.3)",fontWeight:"700"},children:"HUB VERIFIED"})]}),t.punchIn?.time&&t.punchOut?.time&&e.jsx("div",{style:{fontSize:"13px",fontWeight:"900",color:"#0ea5e9"},children:(()=>{const c=new Date(t.punchOut.time)-new Date(t.punchIn.time),d=Math.floor(c/36e5),m=Math.floor(c%36e5/6e4);return`${d}H ${m}M TRANSIT`})()})]})]},t._id))})]},"attendance"),s==="leaves"&&e.jsxs(r.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.5)",padding:"clamp(20px, 5vw, 40px)",borderRadius:"40px",border:"1px solid rgba(255,255,255,0.08)",marginBottom:"35px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"150px",height:"150px",background:"radial-gradient(circle, rgba(251, 191, 36, 0.1) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsxs("h3",{style:{fontSize:"24px",fontWeight:"950",marginBottom:"30px",display:"flex",alignItems:"center",gap:"15px",letterSpacing:"-1px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"15px",background:"rgba(251, 191, 36, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid rgba(251, 191, 36, 0.2)"},children:e.jsx(Z,{size:22,color:"#fbbf24"})}),"ABSENCE PROTOCOL"]}),e.jsxs("form",{onSubmit:ce,style:{display:"flex",flexDirection:"column",gap:"25px"},children:[e.jsxs("div",{className:"resp-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[e.jsxs("div",{className:"premium-input-group",children:[e.jsx("label",{className:"premium-label",children:"DEPARTURE CYCLE"}),e.jsx("input",{type:"date",required:!0,className:"premium-compact-input",value:l.startDate,onChange:t=>y({...l,startDate:t.target.value})})]}),e.jsxs("div",{className:"premium-input-group",children:[e.jsx("label",{className:"premium-label",children:"RETURN CYCLE"}),e.jsx("input",{type:"date",required:!0,className:"premium-compact-input",value:l.endDate,onChange:t=>y({...l,endDate:t.target.value})})]})]}),e.jsxs("div",{className:"premium-input-group",children:[e.jsx("label",{className:"premium-label",children:"CLASSIFICATION"}),e.jsxs("select",{className:"premium-compact-input",value:l.type,onChange:t=>y({...l,type:t.target.value}),children:[e.jsx("option",{value:"Sick Leave",children:"Medical / Recuperation"}),e.jsx("option",{value:"Casual Leave",children:"Scheduled Absence"}),e.jsx("option",{value:"Personal",children:"Critical Emergency"})]})]}),e.jsxs("div",{className:"premium-input-group",children:[e.jsx("label",{className:"premium-label",children:"CONTEXTUAL BRIEF"}),e.jsx("textarea",{className:"premium-compact-input",rows:"3",value:l.reason,onChange:t=>y({...l,reason:t.target.value}),style:{height:"auto",paddingTop:"16px",resize:"none"},placeholder:"Provide mission-critical details..."})]}),e.jsx(r.button,{type:"submit",disabled:B,whileHover:{scale:1.02},whileTap:{scale:.98},style:{height:"64px",background:"linear-gradient(135deg, #fbbf24, #f59e0b)",border:"none",borderRadius:"20px",color:"#000",fontWeight:"950",fontSize:"16px",letterSpacing:"1px",cursor:"pointer",boxShadow:"0 15px 30px -5px rgba(251, 191, 36, 0.4)",marginTop:"10px"},children:B?"TRANSMITTING...":"AUTHORIZE REQUEST"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#fbbf24",boxShadow:"0 0 10px #fbbf24"}}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:"950",margin:0,letterSpacing:"-0.5px"},children:"SIGNAL HISTORY"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:D.length===0?e.jsx("div",{style:{padding:"60px 40px",textAlign:"center",background:"rgba(255,255,255,0.02)",borderRadius:"35px",border:"1px dashed rgba(255,255,255,0.05)"},children:e.jsx("p",{style:{margin:0,color:"rgba(255,255,255,0.3)",fontWeight:"900",letterSpacing:"2px"},children:"NO DATA STREAMS"})}):D.map(t=>e.jsxs(r.div,{whileHover:{x:5},style:{background:"rgba(15, 23, 42, 0.4)",padding:"24px",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.06)",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"15px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(251, 191, 36, 0.05)",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid rgba(251, 191, 36, 0.1)"},children:e.jsx(be,{size:18,color:"#fbbf24"})}),e.jsxs("div",{children:[e.jsxs("p",{style:{margin:0,fontSize:"14px",fontWeight:"950",color:"white"},children:[new Date(t.startDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})," — ",new Date(t.endDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})]}),e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"9px",fontWeight:"900",color:"rgba(255,255,255,0.3)",textTransform:"uppercase",letterSpacing:"1px"},children:[t.type," CLASSIFICATION"]})]})]}),e.jsx("div",{style:{padding:"8px 16px",borderRadius:"10px",fontSize:"10px",fontWeight:"950",letterSpacing:"1.5px",background:t.status==="Approved"?"rgba(16, 185, 129, 0.1)":t.status==="Rejected"?"rgba(244, 63, 94, 0.1)":"rgba(251, 191, 36, 0.1)",color:t.status==="Approved"?"#10b981":t.status==="Rejected"?"#f43f5e":"#fbbf24",border:`1px solid ${t.status==="Approved"?"rgba(16, 185, 129, 0.2)":t.status==="Rejected"?"rgba(244, 63, 94, 0.2)":"rgba(251, 191, 36, 0.2)"}`,textTransform:"uppercase"},children:t.status})]},t._id))})]},"leaves"),s==="salary"&&e.jsx(r.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},children:e.jsxs("div",{className:"resp-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px"},children:[e.jsxs("div",{style:{gridColumn:"span 2",display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"4px",height:"16px",background:"#10b981",borderRadius:"4px"}}),e.jsx("h3",{style:{fontSize:"18px",fontWeight:"950",margin:0,letterSpacing:"-0.5px"},children:"FINANCIAL TELEMETRY"})]}),x.length>0&&e.jsx("select",{value:g,onChange:t=>le(parseInt(t.target.value)),className:"premium-compact-input",style:{width:"auto",height:"40px",padding:"0 35px 0 15px",marginBottom:0},children:x.map((t,i)=>e.jsx("option",{value:i,children:t.cycleLabel},i))})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.8), rgba(30, 41, 59, 0.5))",padding:"clamp(30px, 8vw, 60px) 40px",borderRadius:"40px",border:"1px solid rgba(255,255,255,0.08)",textAlign:"center",position:"relative",overflow:"hidden",boxShadow:"0 30px 60px -12px rgba(0,0,0,0.5)"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle at 70% 20%, rgba(16, 185, 129, 0.1), transparent 60%)"}}),e.jsx("p",{style:{fontSize:"11px",fontWeight:"950",color:"rgba(255,255,255,0.4)",textTransform:"uppercase",letterSpacing:"3px",marginBottom:"15px"},children:g===0?"ESTIMATED ACCRUAL":"SETTLED REVENUE"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"baseline",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"32px",fontWeight:"900",color:"#10b981"},children:"₹"}),e.jsx("h1",{style:{fontSize:"clamp(50px, 12vw, 80px)",fontWeight:"950",color:"white",margin:0,letterSpacing:"-3px"},children:n?.finalSalary?.toLocaleString()||"0"})]}),e.jsx("div",{style:{marginTop:"25px",display:"inline-flex",padding:"8px 24px",background:"rgba(16, 185, 129, 0.1)",borderRadius:"100px",border:"1px solid rgba(16, 185, 129, 0.2)"},children:e.jsx("p",{style:{margin:0,fontSize:"12px",color:"#10b981",fontWeight:"950",letterSpacing:"1px"},children:n?.cycleLabel||"ACTIVE STREAMS"})})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.4)",borderRadius:"35px",border:"1px solid rgba(255,255,255,0.06)",overflow:"hidden",backdropFilter:"blur(30px)"},children:[e.jsxs("div",{style:{padding:"24px 30px",background:"rgba(255,255,255,0.03)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:"12px",fontWeight:"950",color:"rgba(255,255,255,0.5)",letterSpacing:"1px"},children:"PAYROLL METRICS"}),e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",alignSelf:"center",boxShadow:"0 0 10px #10b981"}})]}),e.jsxs("div",{style:{padding:"30px",display:"flex",flexDirection:"column",gap:"20px"},children:[[{label:"GROSS PAYOUT",value:n?.salary,color:"white",icon:fe},{label:"ACTIVE DEPLOYS",value:`${n?.presentDays||0} Days`,color:"#0ea5e9",icon:Q},{label:"OVERTIME BONUS",value:n?.sundayBonus,color:"#10b981",prefix:"+ ₹",icon:T},{label:"MISSION DEDUCTION",value:n?.deduction,color:"#f43f5e",prefix:"- ₹",icon:ye}].map((t,i)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(t.icon,{size:14,style:{opacity:.3}}),e.jsx("span",{style:{fontSize:"13px",color:"rgba(255,255,255,0.4)",fontWeight:"800"},children:t.label})]}),e.jsx("span",{style:{fontSize:"16px",color:t.color,fontWeight:"950"},children:typeof t.value=="number"?`${t.prefix||"₹"} ${t.value.toLocaleString()}`:t.value})]},i)),e.jsx("div",{style:{height:"1px",background:"rgba(255,255,255,0.08)",margin:"10px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(16, 185, 129, 0.1)",padding:"24px",borderRadius:"24px",border:"1px solid rgba(16, 185, 129, 0.2)",boxShadow:"inset 0 0 30px rgba(16, 185, 129, 0.05)"},children:[e.jsx("span",{style:{fontSize:"15px",fontWeight:"950",color:"rgba(255,255,255,0.8)"},children:"NET REVENUE"}),e.jsxs("span",{style:{fontSize:"24px",fontWeight:"950",color:"#10b981",letterSpacing:"-1px"},children:["₹ ",n?.finalSalary?.toLocaleString()||"0"]})]})]})]})})]})},"salary")]})]}),e.jsx(k,{children:de&&e.jsxs(r.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(30px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(2, 6, 23, 0.95)",zIndex:9999,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"25px",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(to bottom, rgba(0,0,0,0.8), transparent)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"rgba(14, 165, 233, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid rgba(14, 165, 233, 0.3)",boxShadow:"0 0 20px rgba(14, 165, 233, 0.4)"},children:e.jsx(E,{size:20,color:"#0ea5e9"})}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"950",margin:0,letterSpacing:"1px",color:"white"},children:"BIOMETRIC SCAN"}),e.jsx("p",{style:{margin:0,fontSize:"10px",color:"#0ea5e9",fontWeight:"800",letterSpacing:"2px",textTransform:"uppercase"},children:N==="in"?"Arrival Protocol":"Departure Protocol"})]})]}),e.jsx("button",{onClick:()=>{V(),j(!1)},style:{background:"rgba(244, 63, 94, 0.1)",border:"1px solid rgba(244, 63, 94, 0.3)",color:"#f43f5e",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",width:"44px",height:"44px",borderRadius:"50%",transition:"0.3s"},children:e.jsx(X,{size:24})})]}),e.jsx("div",{style:{flex:1,position:"relative",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",padding:"20px"},children:e.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"350px",aspectRatio:"1/1",borderRadius:"50%",overflow:"hidden",border:"4px solid rgba(14, 165, 233, 0.2)",padding:"10px",background:"rgba(0,0,0,0.3)",backdropFilter:"blur(10px)",boxShadow:"0 0 50px rgba(14, 165, 233, 0.15)"},children:[e.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",borderRadius:"50%",overflow:"hidden"},children:[h?e.jsx("img",{src:h,style:{width:"100%",height:"100%",objectFit:"cover"},alt:"Captured Identity"}):e.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}}),e.jsx("canvas",{ref:I,style:{display:"none"}}),!h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"absolute",top:"10%",left:"10%",width:"20px",height:"20px",borderLeft:"2px solid #0ea5e9",borderTop:"2px solid #0ea5e9"}}),e.jsx("div",{style:{position:"absolute",top:"10%",right:"10%",width:"20px",height:"20px",borderRight:"2px solid #0ea5e9",borderTop:"2px solid #0ea5e9"}}),e.jsx("div",{style:{position:"absolute",bottom:"10%",left:"10%",width:"20px",height:"20px",borderLeft:"2px solid #0ea5e9",borderBottom:"2px solid #0ea5e9"}}),e.jsx("div",{style:{position:"absolute",bottom:"10%",right:"10%",width:"20px",height:"20px",borderRight:"2px solid #0ea5e9",borderBottom:"2px solid #0ea5e9"}}),e.jsx(r.div,{animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0},style:{position:"absolute",top:"50%",left:"5%",right:"5%",height:"1px",background:"rgba(14, 165, 233, 0.5)",zIndex:10}}),e.jsx(r.div,{animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,delay:1},style:{position:"absolute",left:"50%",top:"5%",bottom:"5%",width:"1px",background:"rgba(14, 165, 233, 0.5)",zIndex:10}})]}),!h&&e.jsx(r.div,{animate:{y:[-150,450,-150]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",top:"0",left:"0",right:"0",height:"100px",background:"linear-gradient(to bottom, transparent, rgba(14, 165, 233, 0.4), transparent)",borderBottom:"2px solid #0ea5e9",zIndex:11,pointerEvents:"none"}})]}),h&&e.jsxs("div",{style:{position:"absolute",inset:0,background:"rgba(16, 185, 129, 0.1)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:15,borderRadius:"50%"},children:[e.jsx(r.div,{initial:{scale:0},animate:{scale:1},style:{background:"#10b981",borderRadius:"50%",padding:"15px",boxShadow:"0 0 40px rgba(16, 185, 129, 0.6)",marginBottom:"15px"},children:e.jsx(me,{size:32,color:"white"})}),e.jsx("span",{style:{fontWeight:"800",fontSize:"16px",color:"white",letterSpacing:"3px",textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:"BIOMETRIC VERIFIED"})]})]})}),e.jsx("div",{style:{padding:"20px",background:"linear-gradient(to top, #020617 80%, transparent)",display:"flex",justifyContent:"center",gap:"20px"},children:e.jsxs("div",{style:{display:"flex",gap:"15px",width:"100%",maxWidth:"400px"},children:[e.jsx("button",{onClick:()=>f(null),style:{flex:1,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",color:"white",height:"64px",borderRadius:"30px",fontWeight:"950",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",fontSize:"14px",letterSpacing:"1px"},children:e.jsx(je,{size:20})}),e.jsx("button",{onClick:xe,disabled:A,style:{flex:2,background:"linear-gradient(135deg, #0ea5e9, #6366f1)",border:"none",color:"white",height:"64px",borderRadius:"30px",fontWeight:"950",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",cursor:"pointer",fontSize:"16px",letterSpacing:"1px",boxShadow:"0 15px 30px rgba(99, 102, 241, 0.5)"},children:A?"UPLOADING...":e.jsxs(e.Fragment,{children:[e.jsx(E,{size:24})," SECURE BIOMETRICS"]})})]})})]})}),e.jsx("style",{children:`
                .spinner {
                    border: 3px solid rgba(14, 165, 233, 0.1);
                    border-radius: 50%;
                    border-top: 3px solid #0ea5e9;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                .input-field {
                    width: 100%;
                    padding: 0 16px;
                    border-radius: 16px;
                    font-size: 14px;
                    font-weight: 500;
                    margin-bottom: 20px;
                    transition: 0.3s;
                    box-sizing: border-box;
                }
                .input-field:focus {
                    border-color: #0ea5e9 !important;
                    outline: none;
                }
                ::-webkit-scrollbar { display: none; }
            `})]})};export{Re as default};
